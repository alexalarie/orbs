

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ORBS Reduction Guide &mdash; Orbs 4.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/logo.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="Orbs 4.1 documentation" href="index.html"/>
        <link rel="next" title="ORBS Reduction FAQ" href="reduction_faq.html"/>
        <link rel="prev" title="Installing Orbs" href="installing_orbs.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Orbs
          

          
            
            <img src="_static/logo_sidebar.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                4.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="installing_orbs.html">Installing Orbs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">ORBS Reduction Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-2-steps-reduction">A 2 steps reduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creation-of-the-option-file">Creation of the option file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#required-parameters">Required parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#how-to-compute-the-step-size-in-nm-from-sitelle-s-data-files-header">How to compute the step size in nm from SITELLE’S data files header ?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#optional-parameters">Optional parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bias-dark-and-flat-field-correction">Bias, dark and flat field correction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#calibration-data">Calibration data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#start-of-the-reduction-process">Start of the reduction process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#start-command">Start command</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#choosing-your-starting-step">Choosing your starting step</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#other-operations-with-orbs-command">Other operations with orbs command</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reduction-files">Reduction files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#temporary-reduction-folder">Temporary reduction folder</a></li>
<li class="toctree-l4"><a class="reference internal" href="#log-file">Log file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reduce-your-calibration-files">Reduce your calibration files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#laser-cube-wavelength-wavenumber-calibration">Laser cube (wavelength/wavenumber calibration)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#option-file">Option file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reduction-command">Reduction command</a></li>
<li class="toctree-l4"><a class="reference internal" href="#output-file">Output file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#standard-star-photometrical-calibration">Standard star (photometrical calibration)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">Option file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">Reduction command</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Output file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#continuum-source-cube-phase-map">Continuum source cube (Phase map)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">Option file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Reduction command</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">Output file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#choosing-the-right-output">Choosing the right output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#wavelength-or-wavenumber">Wavelength or wavenumber ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#to-apodize-or-not-to-apodize">To apodize or not to apodize ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#why-you-might-not-want-the-spectral-calibration">Why you might not want the spectral calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#summary">Summary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-classic-output">The classic output</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-orcs-output">The ORCS output</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#core-concepts">Core concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#file-list">File list</a></li>
<li class="toctree-l3"><a class="reference internal" href="#road-map">Road Map</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reduction_faq.html">ORBS Reduction FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="reduction_errors.html">ORBS Common reduction errors</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="orbs_module.html">Orbs module</a></li>
<li class="toctree-l1"><a class="reference internal" href="process_module.html">Process module</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Orbs</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>ORBS Reduction Guide</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/reduction_guide.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

/* nice headers on first paragraph of info/warning boxes */
.admonition .first {
    margin: -12px;
    padding: 6px 12px;
    margin-bottom: 12px;
    color: #fff;
    line-height: 1;
    display: block;
}
.admonition.warning .first {
    background: #f0b37e;
}
.admonition.note .first {
    background: #6ab0de;
}
.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="orbs-reduction-guide">
<span id="reduction-guide"></span><h1><a class="toc-backref" href="#id13">ORBS Reduction Guide</a><a class="headerlink" href="#orbs-reduction-guide" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#orbs-reduction-guide" id="id13">ORBS Reduction Guide</a><ul>
<li><a class="reference internal" href="#a-2-steps-reduction" id="id14">A 2 steps reduction</a></li>
<li><a class="reference internal" href="#creation-of-the-option-file" id="id15">Creation of the option file</a><ul>
<li><a class="reference internal" href="#required-parameters" id="id16">Required parameters</a><ul>
<li><a class="reference internal" href="#how-to-compute-the-step-size-in-nm-from-sitelle-s-data-files-header" id="id17">How to compute the step size in nm from SITELLE’S data files header ?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optional-parameters" id="id18">Optional parameters</a><ul>
<li><a class="reference internal" href="#bias-dark-and-flat-field-correction" id="id19">Bias, dark and flat field correction</a></li>
<li><a class="reference internal" href="#calibration-data" id="id20">Calibration data</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#start-of-the-reduction-process" id="id21">Start of the reduction process</a><ul>
<li><a class="reference internal" href="#start-command" id="id22">Start command</a><ul>
<li><a class="reference internal" href="#choosing-your-starting-step" id="id23">Choosing your starting step</a></li>
</ul>
</li>
<li><a class="reference internal" href="#other-operations-with-orbs-command" id="id24">Other operations with orbs command</a></li>
<li><a class="reference internal" href="#reduction-files" id="id25">Reduction files</a><ul>
<li><a class="reference internal" href="#temporary-reduction-folder" id="id26">Temporary reduction folder</a></li>
<li><a class="reference internal" href="#log-file" id="id27">Log file</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#reduce-your-calibration-files" id="id28">Reduce your calibration files</a><ul>
<li><a class="reference internal" href="#laser-cube-wavelength-wavenumber-calibration" id="id29">Laser cube (wavelength/wavenumber calibration)</a><ul>
<li><a class="reference internal" href="#option-file" id="id30">Option file</a></li>
<li><a class="reference internal" href="#reduction-command" id="id31">Reduction command</a></li>
<li><a class="reference internal" href="#output-file" id="id32">Output file</a></li>
</ul>
</li>
<li><a class="reference internal" href="#standard-star-photometrical-calibration" id="id33">Standard star (photometrical calibration)</a><ul>
<li><a class="reference internal" href="#id2" id="id34">Option file</a></li>
<li><a class="reference internal" href="#id3" id="id35">Reduction command</a></li>
<li><a class="reference internal" href="#id4" id="id36">Output file</a></li>
</ul>
</li>
<li><a class="reference internal" href="#continuum-source-cube-phase-map" id="id37">Continuum source cube (Phase map)</a><ul>
<li><a class="reference internal" href="#id5" id="id38">Option file</a></li>
<li><a class="reference internal" href="#id6" id="id39">Reduction command</a></li>
<li><a class="reference internal" href="#id7" id="id40">Output file</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#choosing-the-right-output" id="id41">Choosing the right output</a><ul>
<li><a class="reference internal" href="#wavelength-or-wavenumber" id="id42">Wavelength or wavenumber ?</a></li>
<li><a class="reference internal" href="#to-apodize-or-not-to-apodize" id="id43">To apodize or not to apodize ?</a></li>
<li><a class="reference internal" href="#why-you-might-not-want-the-spectral-calibration" id="id44">Why you might not want the spectral calibration</a></li>
<li><a class="reference internal" href="#summary" id="id45">Summary</a><ul>
<li><a class="reference internal" href="#the-classic-output" id="id46">The classic output</a></li>
<li><a class="reference internal" href="#the-orcs-output" id="id47">The ORCS output</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#core-concepts" id="id48">Core concepts</a><ul>
<li><a class="reference internal" href="#file-list" id="id49">File list</a></li>
<li><a class="reference internal" href="#road-map" id="id50">Road Map</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="a-2-steps-reduction">
<h2><a class="toc-backref" href="#id14">A 2 steps reduction</a><a class="headerlink" href="#a-2-steps-reduction" title="Permalink to this headline">¶</a></h2>
<p>Each reduction can be divided in two major steps :</p>
<ul class="simple">
<li><a class="reference internal" href="#creation-option-file"><span class="std std-ref">Creation of the option file</span></a></li>
<li><a class="reference internal" href="#start-reduction-process"><span class="std std-ref">Start of the reduction process</span></a></li>
</ul>
<p>The creation of the option file is certainly the most important step
as this file contains all the parameters which will be passed to
ORBS. Indeed this file controls all the important aspects of the
reduction. While starting the reduction process can be reduced to
typing a simple command line.</p>
</div>
<div class="section" id="creation-of-the-option-file">
<span id="creation-option-file"></span><h2><a class="toc-backref" href="#id15">Creation of the option file</a><a class="headerlink" href="#creation-of-the-option-file" title="Permalink to this headline">¶</a></h2>
<p>Many parameters must be passed to ORBS for a reduction. An option file
is just a list of these parameters recorded into a text file, each
line being made of a keyword and its value, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">OBJECT</span> <span class="n">M1</span><span class="o">-</span><span class="mi">67</span> <span class="c1"># Object name</span>
<span class="n">FILTER</span> <span class="n">SPIOMM_R</span> <span class="c1"># Filter</span>
<span class="n">SPESTEP</span> <span class="mi">3852</span> <span class="c1"># Step size in nm</span>
<span class="n">SPESTNB</span> <span class="mi">415</span> <span class="c1"># Step nb</span>
<span class="n">SPEORDR</span> <span class="mi">11</span> <span class="c1"># Aliasing order</span>
<span class="n">SPEEXPT</span> <span class="mi">30</span> <span class="c1"># Integration time</span>
<span class="n">DIRCAM1</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">spiomm</span><span class="o">/</span><span class="n">M1</span><span class="o">-</span><span class="mi">67</span><span class="o">/</span><span class="n">cam1</span><span class="o">/</span> <span class="c1"># Path to the raw images of the camera 1</span>
<span class="n">DIRCAM2</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">spiomm</span><span class="o">/</span><span class="n">M1</span><span class="o">-</span><span class="mi">67</span><span class="o">/</span><span class="n">cam2</span><span class="o">/</span> <span class="c1"># Path to the raw images of the camera 2</span>
<span class="n">DIRCAL1</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">spiomm</span><span class="o">/</span><span class="n">M1</span><span class="o">-</span><span class="mi">67</span><span class="o">/</span><span class="n">HeNe</span><span class="o">/</span> <span class="c1"># Calibration laser images of camera 1</span>
</pre></div>
</div>
<p>Some of the parameters in this file must be present while some are
just optional.</p>
<div class="section" id="required-parameters">
<span id="id1"></span><h3><a class="toc-backref" href="#id16">Required parameters</a><a class="headerlink" href="#required-parameters" title="Permalink to this headline">¶</a></h3>
<p>The following parameters are required if you want to transform you raw
interferometric images into a spectral cube:</p>
<ul class="simple">
<li><strong>OBJECT</strong>: The name of the object. It is only used to name the
output files and can be anything (as long as it does not contain any
white space).</li>
<li><strong>FILTER</strong>: Must be a valid name. The list of the available filters
can be found in ORB data folder (<code class="file docutils literal"><span class="pre">orb/data/filter_*</span></code>). For SITELLE’s
data you can refer to the keyword FILTER in the header of the data
files.</li>
<li><strong>SPESTEP</strong>: Step size in nm. At this point it is not directly given
in the header of SITELLE’s data and must be calculated (see
<a class="reference internal" href="#compute-step-size"><span class="std std-ref">How to compute the step size in nm from SITELLE’S data files header ?</span></a>).</li>
<li><strong>SPESTNB</strong>: Number of steps expected in the scan (i.e. number of
raw files acquired if the scan has been completed). It must be at
least equal to the number of raw images.</li>
<li><strong>SPEORDR</strong>: Aliasing (or folding) order (you can refer to SITORDER
in SITELLE’s files header).</li>
<li><strong>DIRCAM1</strong>: Absolute path to the raw images of the camera 1</li>
<li><strong>DIRCAM2</strong>: Absolute path to the raw images of the camera 2 (For
SITELLE both paths must be the same)</li>
<li><strong>SPEEXPT</strong>: Integration time of each frame (in s)</li>
<li><strong>DIRCAL1</strong>: Path to the folder containing the calibration laser
images of the camera 1.</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When a path to a folder is expected, the folder must only
contain the requested files (i.e. the folder set to DIRCAL1
must only contain the images of the calibration laser
cube). Note also that only FITS files will be considered,
i.e. you can put any other type of file in this folder. If
all you FITS files must be in the same folder you can give
the path to a file list (see <a class="reference internal" href="#file-list"><span class="std std-ref">File list</span></a>) in place of a
path to a folder.</p>
</div>
<div class="section" id="how-to-compute-the-step-size-in-nm-from-sitelle-s-data-files-header">
<span id="compute-step-size"></span><h4><a class="toc-backref" href="#id17">How to compute the step size in nm from SITELLE’S data files header ?</a><a class="headerlink" href="#how-to-compute-the-step-size-in-nm-from-sitelle-s-data-files-header" title="Permalink to this headline">¶</a></h4>
<p>The following formula can be used:</p>
<div class="math">
\[\frac{(n + 1) \times \lambda_{\text{min}}}{2}\]</div>
<p><span class="math">\(n\)</span> : Aliasing order (SITORDER)</p>
<p><span class="math">\(\lambda_{\text{min}}\)</span> : Minimum wavelength of the filter (SITLAMIN)</p>
</div>
</div>
<div class="section" id="optional-parameters">
<h3><a class="toc-backref" href="#id18">Optional parameters</a><a class="headerlink" href="#optional-parameters" title="Permalink to this headline">¶</a></h3>
<p>The following parameters are considered as optional because you can
get a spectral cube without them. But they might prove useful if you
want to correct your images for the bias, dark current and flat field
and calibrate your files in energy, angle and wavelength.</p>
<div class="section" id="bias-dark-and-flat-field-correction">
<h4><a class="toc-backref" href="#id19">Bias, dark and flat field correction</a><a class="headerlink" href="#bias-dark-and-flat-field-correction" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><strong>DIRBIA1</strong>: Path to a folder containing the bias frames of the camera 1.</li>
<li><strong>DIRBIA2</strong>: Path to a folder containing the bias frames of the camera 2.</li>
<li><strong>DIRDRK1</strong>: Path to a folder containing the dark frames of the camera 1.</li>
<li><strong>DIRDRK2</strong>: Path to a folder containing the dark frames of the camera 2.</li>
<li><strong>DIRFLT1</strong>: Path to a folder containing the flat frames of the camera 1.</li>
<li><strong>DIRFLT2</strong>: Path to a folder containing the flat frames of the camera 2.</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">DIRBIA1</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">thomas</span><span class="o">/</span><span class="n">Réduction</span><span class="o">/</span><span class="n">Données</span><span class="o">/</span><span class="n">Data_2012_06</span><span class="o">/</span><span class="n">BIAS</span><span class="o">/</span><span class="n">cam1</span>
<span class="n">DIRBIA2</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">thomas</span><span class="o">/</span><span class="n">Réduction</span><span class="o">/</span><span class="n">Données</span><span class="o">/</span><span class="n">Data_2012_06</span><span class="o">/</span><span class="n">BIAS</span><span class="o">/</span><span class="n">cam2</span><span class="o">/</span><span class="mi">4</span><span class="n">x4</span>
<span class="n">DIRDRK1</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">thomas</span><span class="o">/</span><span class="n">Réduction</span><span class="o">/</span><span class="n">Données</span><span class="o">/</span><span class="n">Data_2012_06</span><span class="o">/</span><span class="n">DARK</span><span class="o">/</span><span class="n">cam1</span>
<span class="n">DIRDRK2</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">thomas</span><span class="o">/</span><span class="n">Réduction</span><span class="o">/</span><span class="n">Données</span><span class="o">/</span><span class="n">Data_2012_06</span><span class="o">/</span><span class="n">DARK</span><span class="o">/</span><span class="n">cam2</span><span class="o">/</span><span class="mi">4</span><span class="n">x4</span>
<span class="n">DIRFLT1</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">thomas</span><span class="o">/</span><span class="n">Réduction</span><span class="o">/</span><span class="n">Données</span><span class="o">/</span><span class="n">Data_2012_06</span><span class="o">/</span><span class="n">FLAT</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">cam1</span><span class="o">/</span><span class="mi">3</span><span class="n">x3</span>
<span class="n">DIRFLT2</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">thomas</span><span class="o">/</span><span class="n">Réduction</span><span class="o">/</span><span class="n">Données</span><span class="o">/</span><span class="n">Data_2012_06</span><span class="o">/</span><span class="n">FLAT</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">cam2</span><span class="o">/</span><span class="mi">4</span><span class="n">x4</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><strong>SITELLE</strong>: Bias correction is automatically done from
the overscan part of the data: do not give a path to bias
frames because it will result in subtracting two times
the bias.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><strong>SpIOMM</strong>: In the recent observations, a bias frame is
taken at each exposition with the camera 2. In this case
the bias is automatically subtracted. Only the path to
the bias files for the camera 1 is thus required. Giving
a path for the bias frames of the camera 2 would result
in subtracting two times the bias.</p>
</div>
</div>
<div class="section" id="calibration-data">
<h4><a class="toc-backref" href="#id20">Calibration data</a><a class="headerlink" href="#calibration-data" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first"><strong>CALIBMAP</strong>: Path to a calibration laser map. The way you can
obtain this map is described at the section
<a class="reference internal" href="#laser-cube"><span class="std std-ref">Laser cube (wavelength/wavenumber calibration)</span></a>. If the same calibration laser cube is
used for multiple science cubes it is faster to compute the
calibration map once and for all instead.</p>
</li>
<li><p class="first"><strong>STDPATH</strong>: Path to the spectrum of a standard star. The spectrum
must have been reduced by ORBS following the procedure described at
the section <a class="reference internal" href="#standard-star"><span class="std std-ref">Standard star (photometrical calibration)</span></a>. <strong>STDNAME</strong> must also be set.</p>
</li>
<li><p class="first"><strong>STDNAME</strong>: Name of the standard star. A list of the available
standard name can be found in ORB data folder:
<code class="file docutils literal"><span class="pre">orb/data/std_table.orb</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">STDNAME</span> <span class="n">HD74721</span>
<span class="n">STDPATH</span> <span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">calib</span><span class="o">/</span><span class="n">HD74721</span><span class="o">/</span><span class="n">HD74721_SPIOMM_R</span><span class="o">.</span><span class="n">merged</span><span class="o">.</span><span class="n">standard_spectrum</span><span class="o">.</span><span class="n">fits</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>TARGETX</strong>, <strong>TARGETY</strong>, <strong>TARGETR</strong>, <strong>TARGETD</strong>: Image position
along X and Y axis and celestial coordinates (RA, DEC) of a point
near the center of the image. The astrometrical calibration will be
computed from a star catalog query (USNO-B1) around this point (An
internet connection must be available):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">TARGETR</span> <span class="mi">19</span><span class="p">:</span><span class="mi">11</span><span class="p">:</span><span class="mf">30.857</span>
<span class="n">TARGETD</span> <span class="o">+</span><span class="mi">16</span><span class="p">:</span><span class="mi">51</span><span class="p">:</span><span class="mf">39.92</span>
<span class="n">TARGETX</span> <span class="mf">214.31944</span>
<span class="n">TARGETY</span> <span class="mf">205.87269</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>PHAPATH</strong>: Path to the phase map created from a continuum source cube (see <a class="reference internal" href="#continuum-source"><span class="std std-ref">Continuum source cube (Phase map)</span></a>)</p>
</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">All the other possible parameters are described in
<a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs" title="orbs.orbs.Orbs"><code class="xref py py-class docutils literal"><span class="pre">orbs.orbs.Orbs</span></code></a>.</p>
</div>
</div>
</div>
</div>
<div class="section" id="start-of-the-reduction-process">
<span id="start-reduction-process"></span><h2><a class="toc-backref" href="#id21">Start of the reduction process</a><a class="headerlink" href="#start-of-the-reduction-process" title="Permalink to this headline">¶</a></h2>
<div class="section" id="start-command">
<h3><a class="toc-backref" href="#id22">Start command</a><a class="headerlink" href="#start-command" title="Permalink to this headline">¶</a></h3>
<p>The reduction process can be started with the command (see
<a class="reference internal" href="reduction_faq.html#how-can-access-orbs-commands"><span class="std std-ref">How can I have access to ORBS commands ?</span></a>):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">orbs</span> <span class="n">options</span><span class="o">.</span><span class="n">opt</span> <span class="n">start</span>
</pre></div>
</div>
<p>At the end of the process the reduced cube is written in the root
folder where you have launched the command,
e.g. <code class="file docutils literal"><span class="pre">M1-67_SPIOMM_R.merged.nm.1.0.fits</span></code>. Its exact name can
change depending on the kind of chosen output (see
<a class="reference internal" href="#choosing-right-output"><span class="std std-ref">Choosing the right output</span></a>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is recommended that you create a new folder where you can
put your option file (e.g. <code class="file docutils literal"><span class="pre">options.opt</span></code>) and start the
reduction process.</p>
</div>
<div class="section" id="choosing-your-starting-step">
<h4><a class="toc-backref" href="#id23">Choosing your starting step</a><a class="headerlink" href="#choosing-your-starting-step" title="Permalink to this headline">¶</a></h4>
<p>Sometimes it can be useful to restart a reduction from a particular
step in order to change the reduction output type (or because of an
error, but in this case, the <em>resume</em> operation is generally better
see <a class="reference internal" href="#other-operations"><span class="std std-ref">Other operations with orbs command</span></a>). This can be achieved with the option
<code class="xref std std-option docutils literal"><span class="pre">--step</span></code> followed by the step number, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">orbs</span> <span class="n">options</span><span class="o">.</span><span class="n">opt</span> <span class="n">start</span> <span class="o">--</span><span class="n">step</span> <span class="mi">11</span>
</pre></div>
</div>
<p>The step number changes with the desired target (see
<a class="reference internal" href="#reduce-calibration"><span class="std std-ref">Reduce your calibration files</span></a>). For the default target (an
astrophysical object) the <a class="reference internal" href="#road-map"><span class="std std-ref">Road Map</span></a> is:</p>
<ol class="arabic simple" start="0">
<li>Compute alignment vector (camera 1).</li>
<li>Compute alignment vector (camera 2).</li>
<li>Compute cosmic ray map (camera 1)</li>
<li>Compute cosmic ray map (camera 2)</li>
<li>Compute interferogram (camera 1)</li>
<li>Compute interferogram (camera 2)</li>
<li>Transform cube B</li>
<li>Merge interferograms</li>
<li>Compute calibration laser map (camera 1)</li>
<li>Compute phase</li>
<li>Compute phase maps</li>
<li>Compute spectrum</li>
<li>Calibrate spectrum</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">When typing <strong class="command">orbs options.opt start -h</strong> you can get
the roadmaps of some targets.</p>
</div>
</div>
</div>
<div class="section" id="other-operations-with-orbs-command">
<span id="other-operations"></span><h3><a class="toc-backref" href="#id24">Other operations with orbs command</a><a class="headerlink" href="#other-operations-with-orbs-command" title="Permalink to this headline">¶</a></h3>
<p>Other operations are possible with the orbs command:</p>
<p><code class="xref std std-option docutils literal"><span class="pre">resume</span></code>: Resume the last reduction process launched. If all
the steps have been done, the output file is written again on the root
folder:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">orbs</span> <span class="n">options</span><span class="o">.</span><span class="n">opt</span> <span class="n">resume</span>
</pre></div>
</div>
<p><code class="xref std std-option docutils literal"><span class="pre">clean</span></code>: Clean the directory from the files created during the
reduction:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">orbs</span> <span class="n">options</span><span class="o">.</span><span class="n">opt</span> <span class="n">clean</span>
</pre></div>
</div>
<p><code class="xref std std-option docutils literal"><span class="pre">status</span></code>: Display the status (<a class="reference internal" href="#road-map"><span class="std std-ref">Road Map</span></a> and step status)
of all the launched reduction processes:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">orbs</span> <span class="n">options</span><span class="o">.</span><span class="n">opt</span> <span class="n">status</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All the operations are attached to the option file of the
command line.</p>
</div>
</div>
<div class="section" id="reduction-files">
<h3><a class="toc-backref" href="#id25">Reduction files</a><a class="headerlink" href="#reduction-files" title="Permalink to this headline">¶</a></h3>
<p>A lot of reduction files are created during the process. The most
important are described here.</p>
<div class="section" id="temporary-reduction-folder">
<h4><a class="toc-backref" href="#id26">Temporary reduction folder</a><a class="headerlink" href="#temporary-reduction-folder" title="Permalink to this headline">¶</a></h4>
<p>First of all a temporary reduction folder is created. It is named
after the object name and the filter used
(e.g. <code class="file docutils literal"><span class="pre">M1-67_SPIOMM_R/</span></code>). This way different data cubes of the
same object taken with different filters can be reduced in the same
folder.</p>
</div>
<div class="section" id="log-file">
<h4><a class="toc-backref" href="#id27">Log file</a><a class="headerlink" href="#log-file" title="Permalink to this headline">¶</a></h4>
<p>A log file named after the option file (e.g. <code class="file docutils literal"><span class="pre">options.opt.log</span></code>)
is created. It contains all the comments, warnings and error messages
that are displayed on the screen.</p>
</div>
</div>
</div>
<div class="section" id="reduce-your-calibration-files">
<span id="reduce-calibration"></span><h2><a class="toc-backref" href="#id28">Reduce your calibration files</a><a class="headerlink" href="#reduce-your-calibration-files" title="Permalink to this headline">¶</a></h2>
<div class="section" id="laser-cube-wavelength-wavenumber-calibration">
<span id="laser-cube"></span><h3><a class="toc-backref" href="#id29">Laser cube (wavelength/wavenumber calibration)</a><a class="headerlink" href="#laser-cube-wavelength-wavenumber-calibration" title="Permalink to this headline">¶</a></h3>
<p>The wavelength calibration is certainly the most important one for its
difficulty to be achieved independently on the spectral cube
itself. This calibration is also necessary to get a cube for
eye-checking purpose (see
<a class="reference internal" href="#why-you-might-not-want-the-spectral-calibration"><span class="std std-ref">Why you might not want the spectral calibration</span></a>).</p>
<p>A laser cube at a calibrated wavelength must be reduced to obtain a
calibration map. A calibration map gives the measured wavelength of
the laser for each pixel of the image.</p>
<img alt="_images/calib_map.png" src="_images/calib_map.png" />
<p>The above figure shows a typical calibration map of SpIOMM (The
measured wavelength is given in nm).</p>
<div class="section" id="option-file">
<h4><a class="toc-backref" href="#id30">Option file</a><a class="headerlink" href="#option-file" title="Permalink to this headline">¶</a></h4>
<p>If the laser cube has been taken with the default observation
parameters (step, order – those parameters are defined in the ORB
configuration file) the only required keyword is <strong>DIRCAL1</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1">## Laser configuration file</span>
<span class="n">DIRCAL1</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">the</span><span class="o">/</span><span class="n">calibration</span><span class="o">/</span><span class="n">laser</span><span class="o">/</span><span class="n">folder</span> <span class="c1"># Path to the calibration laser folder</span>
</pre></div>
</div>
<p>If the observation parameters are not the default ones the keywords
<strong>SPESTEP</strong> and <strong>SPEORDR</strong> have to be added:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1">## Laser configuration file</span>

<span class="n">DIRCAL1</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">the</span><span class="o">/</span><span class="n">calibration</span><span class="o">/</span><span class="n">laser</span><span class="o">/</span><span class="n">folder</span> <span class="c1"># Path to the calibration laser folder</span>
<span class="n">SPESTEP</span> <span class="mi">9765</span> <span class="c1"># Step size (in nm)</span>
<span class="n">SPEORDR</span> <span class="mi">30</span> <span class="c1"># Aliasing order</span>
</pre></div>
</div>
</div>
<div class="section" id="reduction-command">
<h4><a class="toc-backref" href="#id31">Reduction command</a><a class="headerlink" href="#reduction-command" title="Permalink to this headline">¶</a></h4>
<p>The reduction command is simply:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">orbs</span> <span class="n">laser</span><span class="o">.</span><span class="n">opt</span> <span class="n">start</span> <span class="o">--</span><span class="n">laser</span>
</pre></div>
</div>
</div>
<div class="section" id="output-file">
<h4><a class="toc-backref" href="#id32">Output file</a><a class="headerlink" href="#output-file" title="Permalink to this headline">¶</a></h4>
<p>The output file is a calibration laser map named
<code class="file docutils literal"><span class="pre">LASER_None.cam1.calibration_laser_map.fits</span></code></p>
</div>
</div>
<div class="section" id="standard-star-photometrical-calibration">
<span id="standard-star"></span><h3><a class="toc-backref" href="#id33">Standard star (photometrical calibration)</a><a class="headerlink" href="#standard-star-photometrical-calibration" title="Permalink to this headline">¶</a></h3>
<p>Reducing a standard star is nearly equivalent to the reduction of
another astrophysical object. The only difference is the output file
which is not a spectral cube but a single spectrum.</p>
<div class="section" id="id2">
<h4><a class="toc-backref" href="#id34">Option file</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p>The required keywords are the same as defined at the section
<a class="reference internal" href="#required-parameters"><span class="std std-ref">Required parameters</span></a> except that the two keywords <strong>TARGETX</strong>
and <strong>TARGETY</strong> giving the position of the standard star in the image
are also required. A minimal option file would be, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">OBJECT</span> <span class="n">HD74721</span> <span class="c1"># Object name</span>
<span class="n">FILTER</span> <span class="n">SPIOMM_R</span> <span class="c1"># Filter name</span>
<span class="n">SPESTEP</span> <span class="mi">4180</span> <span class="c1"># Step size (in nm)</span>
<span class="n">SPESTNB</span> <span class="mi">377</span> <span class="c1"># Number of steps</span>
<span class="n">SPEORDR</span> <span class="mi">12</span> <span class="c1"># Aliasing order</span>
<span class="n">SPEEXPT</span> <span class="mi">3</span> <span class="c1"># Integration time</span>
<span class="n">TARGETX</span> <span class="mi">223</span> <span class="c1"># X position of the standard</span>
<span class="n">TARGETY</span> <span class="mi">268</span> <span class="c1"># Y position of the standard</span>
<span class="n">DIRCAM1</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">standard</span><span class="o">/</span><span class="n">folder</span><span class="o">/</span><span class="n">HD74721</span><span class="o">/</span><span class="n">R</span> <span class="c1"># Standard CAM1 folder path</span>
<span class="n">DIRCAM2</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">standard</span><span class="o">/</span><span class="n">folder</span><span class="o">/</span><span class="n">HD74721</span><span class="o">/</span><span class="n">R</span><span class="o">/</span><span class="n">CAM2</span> <span class="c1"># Standard CAM2 folder path</span>
<span class="n">DIRCAL1</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">calibration</span><span class="o">/</span><span class="n">folder</span><span class="o">/</span><span class="n">HeNe</span> <span class="c1"># Path to the calibration laser cube folder</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The position has not to be more precise than 1 pixel.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Indexing in ds9 starts with 1 while it starts with 0 in
python so don’t forget to subtract 1 to the position read
in ds9.</p>
</div>
</div>
<div class="section" id="id3">
<h4><a class="toc-backref" href="#id35">Reduction command</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>The reduction command is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">orbs</span> <span class="n">standard</span><span class="o">.</span><span class="n">opt</span> <span class="n">start</span> <span class="o">--</span><span class="n">standard</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h4><a class="toc-backref" href="#id36">Output file</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>The output file is a single spectrum in FITS format. With the example
option file above it would be
<code class="file docutils literal"><span class="pre">HD74721_SPIOMM_R.merged.standard_spectrum.fits</span></code>.</p>
</div>
</div>
<div class="section" id="continuum-source-cube-phase-map">
<span id="continuum-source"></span><h3><a class="toc-backref" href="#id37">Continuum source cube (Phase map)</a><a class="headerlink" href="#continuum-source-cube-phase-map" title="Permalink to this headline">¶</a></h3>
<p>A continuum source cube (e.g. a flat field observation) is used to
compute a precise phase map (Up to now only SpIOMM is known to need a
phase map).</p>
<p>It is characterized by the lack of star (or point) sources: no
alignment can be done nor can the transmission vector be computed. So
that all the star-dependant processes must be passed.</p>
<div class="section" id="id5">
<h4><a class="toc-backref" href="#id38">Option file</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>The option file is exactly the same as an astronomical cube (see the
section <a class="reference internal" href="#required-parameters"><span class="std std-ref">Required parameters</span></a>). Only the command line call must
be changed.</p>
</div>
<div class="section" id="id6">
<h4><a class="toc-backref" href="#id39">Reduction command</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p>The reduction command is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">orbs</span> <span class="n">standard</span><span class="o">.</span><span class="n">opt</span> <span class="n">start</span> <span class="o">--</span><span class="n">flat</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h4><a class="toc-backref" href="#id40">Output file</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<p>The output file is a phase map in FITS format. Its name is
e.g. <code class="file docutils literal"><span class="pre">CONTINNUM_SPIOMM_R.merged.flat_phase_map.fits</span></code>.</p>
<p>It can be added to the astronomical object option file with the
keyword <strong>PHAPATH</strong>.</p>
</div>
</div>
</div>
<div class="section" id="choosing-the-right-output">
<span id="choosing-right-output"></span><h2><a class="toc-backref" href="#id41">Choosing the right output</a><a class="headerlink" href="#choosing-the-right-output" title="Permalink to this headline">¶</a></h2>
<p>ORBS gives different possibilities for the output format of the spectral cube:</p>
<ul class="simple">
<li>Spectral axis in wavelength (nm) or in wavenumber
(<span class="math">\(\text{cm}^{-1}\)</span>) (see <a class="reference internal" href="#wavelength-or-wavenumber"><span class="std std-ref">Wavelength or wavenumber ?</span></a>).</li>
<li>Apodization factor (see <a class="reference internal" href="#to-apodize-or-not-to-apodize"><span class="std std-ref">To apodize or not to apodize ?</span></a>).</li>
<li>Spectral calibration or not (see <a class="reference internal" href="#why-you-might-not-want-the-spectral-calibration"><span class="std std-ref">Why you might not want the spectral calibration</span></a>).</li>
</ul>
<p>Choosing one option or the other depend on the use of the spectral
cube. If you want to know quickly what are the best options for you,
jump to the section <a class="reference internal" href="#right-output-summary"><span class="std std-ref">Summary</span></a>.</p>
<div class="section" id="wavelength-or-wavenumber">
<span id="id8"></span><h3><a class="toc-backref" href="#id42">Wavelength or wavenumber ?</a><a class="headerlink" href="#wavelength-or-wavenumber" title="Permalink to this headline">¶</a></h3>
<p>An interferogram is related to a spectrum by the Fourier
Transform. The output of a Fourier Transform is a spectrum projected
along an axis in wavenumber. One can pass from wavenumber to
wavelength using:</p>
<div class="math">
\[\lambda [\text{nm}] = \frac{10^7}{\sigma [\text{cm}^{-1}]}\]</div>
<p>You immediately see where the problem: if the wavenumber axis is
regular then the wavelength axis is not made of regularly spaced
samples. The projection of the spectrum obtained directly after the
FFT onto a regularly sampled wavelength axis relies on the
<strong>interpolation</strong> of the spectrum: i.e. <strong>the spectral information is
changed in an unpredictable way</strong>. Even if no error is made during the
interpolation this also result in the <strong>deformation of the spectral
line shape</strong> from a symmetrical gaussian or sinc line to an
asymmetrical line.</p>
<p>You will thus have difficulties to fit a model (gaussian or sinc) on
your spectral lines and the computed noise will be overestimated (SNR
underestimated).</p>
<p>The only good news is that you will feel more comfortable with spectra
projected onto a wavelength axis.</p>
<p>In summary:</p>
<ul class="simple">
<li>If you just want to check your data: use a wavelength output</li>
<li>If you want to fit your data (<strong>or if you plan to use ORCS</strong>): you
can use the wavenumber output.</li>
</ul>
</div>
<div class="section" id="to-apodize-or-not-to-apodize">
<span id="id9"></span><h3><a class="toc-backref" href="#id43">To apodize or not to apodize ?</a><a class="headerlink" href="#to-apodize-or-not-to-apodize" title="Permalink to this headline">¶</a></h3>
<p>The spectral line shape of an unapodized spectrum is a sinc:</p>
<div class="math">
\[\text{sinc}(x) = \frac{\sin(x)}{x}\]</div>
<p>Some people doesn’t like it and prefer a Gaussian line shape. This is
where the apodization becomes useful.</p>
<p>The apodization consists in multiplying the interferogram by a window
with smooth edges (see e.g. <a class="reference external" href="http://cdsads.u-strasbg.fr/abs/2007JOSAA..24.3644N">Naylor 2007</a>). The Fourier
transform of the interferogram is thus convoluted to the Fourier
transform of the window function, changing the original line shape (a
sinc) to a more Gaussian-like shape.</p>
<p>The apodization factor in ORBS can be set to 1.0 (no apodization:
sinc), 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 2.0 (strongest
apodization: gaussian).</p>
<p>In our case, as long as the user has the right model to fit its data
<strong>the apodization is a transparent operation for everything (flux,
velocity, amplitude) but the spectral resolution (fwhm)</strong> which is
traded for a smoother line shape.</p>
<p>One problem is to fit the <strong>right model</strong>. With an apodization factor
of 1.0 (no apodization) the model is a pure sinc. With an apodization
of 2.0 (strongest apodization) the model is nearly a pure Gaussian. In
between, the model is a mix of both functions without any known
mathematical formulation. Don’t forget also that there is no good
model if the axis is in wavelength because the lines are asymmetrical
(see <a class="reference internal" href="#wavelength-or-wavenumber"><span class="std std-ref">Wavelength or wavenumber ?</span></a>)</p>
<p>The other problem is the loss of spectral resolution. The maximum
spectral resolution is simply divided by the apodization factor.</p>
<p>In summary:</p>
<ul class="simple">
<li>If you don’t care about the spectral resolution and are used to
fitting Gaussian : use the 2.0 apodization function.</li>
<li>If you care about the spectral resolution and feel ready to fit sinc
functions (<strong>or if you plan to use ORCS</strong>): use the 1.0 apodization
function.</li>
</ul>
</div>
<div class="section" id="why-you-might-not-want-the-spectral-calibration">
<span id="id10"></span><h3><a class="toc-backref" href="#id44">Why you might not want the spectral calibration</a><a class="headerlink" href="#why-you-might-not-want-the-spectral-calibration" title="Permalink to this headline">¶</a></h3>
<p>In order to adjust all the spectra so that the samples with the same
wavelength/wavenumber fall in the same channel, the spectral cube must
be calibrated in wavelength/wavenumber (note that this calibration
does not ensures that the wavelength/wavenumber corresponding to one
channel is the exact one, you might better use a sky line for that
purpose). But this operation makes use of <strong>interpolation</strong> which
might <strong>change the spectral information in an unpredictable way</strong>.</p>
<p>If you want to have the purest spectra: just don’t ask for spectral
calibration and use the calibration map to compute the real
wavelength/wavenumber of your fitted lines. The problem is that the
cube will be very difficult to check.</p>
<p>In summary:</p>
<ul class="simple">
<li>If you just want to check your data: you will prefer to work with
data calibrated in wavelength/wavenumber.</li>
<li>If you want to avoid interpolations (<strong>or if you plan to use
ORCS</strong>), ask for no spectral calibration.</li>
</ul>
</div>
<div class="section" id="summary">
<span id="right-output-summary"></span><h3><a class="toc-backref" href="#id45">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h3>
<div class="section" id="the-classic-output">
<h4><a class="toc-backref" href="#id46">The classic output</a><a class="headerlink" href="#the-classic-output" title="Permalink to this headline">¶</a></h4>
<p>If your feel more comfortable with dispersive spectra (classic ones)
and you want a cube <strong>designed for eye-checking purpose</strong> add those
lines to your option file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">WAVENUMBER</span> <span class="mi">0</span> <span class="c1"># Wavelength axis</span>
<span class="n">WAVE_CALIB</span> <span class="mi">1</span> <span class="c1"># Spectral calibration</span>
<span class="n">APOD</span> <span class="mf">2.0</span> <span class="c1"># Gaussian line shape</span>
</pre></div>
</div>
</div>
<div class="section" id="the-orcs-output">
<h4><a class="toc-backref" href="#id47">The ORCS output</a><a class="headerlink" href="#the-orcs-output" title="Permalink to this headline">¶</a></h4>
<p>If you want to use ORCS to extract the parameters or if you simply
want the <strong>purer and preciser</strong> output to work with (or if you like
headaches) add those lines to your option file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">WAVENUMBER</span> <span class="mi">1</span> <span class="c1"># Wavenumber axis</span>
<span class="n">WAVE_CALIB</span> <span class="mi">0</span> <span class="c1"># No spectral calibration</span>
<span class="n">APOD</span> <span class="mf">1.0</span> <span class="c1"># Sinc line shape</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="core-concepts">
<h2><a class="toc-backref" href="#id48">Core concepts</a><a class="headerlink" href="#core-concepts" title="Permalink to this headline">¶</a></h2>
<div class="section" id="file-list">
<span id="id11"></span><h3><a class="toc-backref" href="#id49">File list</a><a class="headerlink" href="#file-list" title="Permalink to this headline">¶</a></h3>
<p>A file list is a text file containing absolute paths, one line by
file (e.g.):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">file</span><span class="o">/</span><span class="mf">1.</span><span class="n">fits</span>
<span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">file</span><span class="o">/</span><span class="mf">2.</span><span class="n">fits</span>
<span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">file</span><span class="o">/</span><span class="mf">3.</span><span class="n">fits</span>
<span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">file</span><span class="o">/</span><span class="mf">4.</span><span class="n">fits</span>
</pre></div>
</div>
<p>It can be created automatically on a UNIX-like system with the
command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ls</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">file</span><span class="o">/*.</span><span class="n">fits</span> <span class="o">&gt;</span><span class="n">files_list</span>
</pre></div>
</div>
</div>
<div class="section" id="road-map">
<span id="id12"></span><h3><a class="toc-backref" href="#id50">Road Map</a><a class="headerlink" href="#road-map" title="Permalink to this headline">¶</a></h3>
<p>A road map defines a reduction sequence as a list of reduction
steps. A different roadmap is defined for each target (object,
standard star, laser cube, flat cube etc.) and each instrument has its
own set of roadmaps. Note also that some target have different
roadmaps depending on the camera we want to reduce.</p>
<p>All the roadmaps are stored in ORBS data folder
(<code class="file docutils literal"><span class="pre">orbs/data/roadmap.*</span></code>). The name of a roadmap file is defined
as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">roadmap</span><span class="o">.</span><span class="p">[</span><span class="n">instrument</span><span class="p">]</span><span class="o">.</span><span class="p">[</span><span class="n">target</span><span class="p">]</span><span class="o">.</span><span class="p">[</span><span class="n">camera</span><span class="p">]</span><span class="o">.</span><span class="n">xml</span>
</pre></div>
</div>
<ul class="simple">
<li><em>instrument</em> can be <em>spiomm</em> or <em>sitelle</em></li>
<li><em>target</em> can be one of the special targets listed above or object
for the default target</li>
<li><em>camera</em> can be <em>full</em> for a process using both cameras; <em>single1</em>
or <em>single2</em> for a process using only the camera 1 or 2.</li>
</ul>
<p>e.g. the roadmap file for the default reduction process of SITELLE is
<code class="file docutils literal"><span class="pre">orbs/data/roadmap.sitelle.object.full.xml</span></code></p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">More on roadmaps and their syntax is given in
<a class="reference internal" href="orbs_module.html#orbs.orbs.RoadMap" title="orbs.orbs.RoadMap"><code class="xref py py-class docutils literal"><span class="pre">orbs.orbs.RoadMap</span></code></a></p>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="reduction_faq.html" class="btn btn-neutral float-right" title="ORBS Reduction FAQ" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installing_orbs.html" class="btn btn-neutral" title="Installing Orbs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Thomas Martin (thomas.martin.1@ulaval.ca).

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'4.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>