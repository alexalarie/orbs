

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Changelog &mdash; Orbs 3.10.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/logo.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Orbs 3.10.0 documentation" href="index.html"/>
        <link rel="prev" title="Process module" href="process_module.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home"> Orbs
        

        
          
          <img src="_static/logo_sidebar.png" class="logo" />
        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="installing_orbs.html">Installing Orbs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installing_orbs.html#unpacking">Unpacking</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installing_python.html">Installing Python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installing_python.html#python">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="installing_python.html#modules">Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="installing_python.html#check-if-a-module-is-already-installed">Check if a module is already installed</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing_python.html#to-use-the-viewers-orb-viewer-and-orb-viewer3d">To use the Viewers (orb-viewer and orb-viewer3d)</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing_python.html#scipy-and-numpy">Scipy and Numpy</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing_python.html#pyfits">PyFITS</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing_python.html#parallel-python">Parallel Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing_python.html#pywcs">PyWCS</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing_python.html#bottleneck">Bottleneck</a></li>
<li class="toctree-l3"><a class="reference internal" href="installing_python.html#h5py">h5py</a><ul>
<li class="toctree-l4"><a class="reference internal" href="installing_python.html#install-szip">Install SZIP</a></li>
<li class="toctree-l4"><a class="reference internal" href="installing_python.html#install-hdf5">Install HDF5</a></li>
<li class="toctree-l4"><a class="reference internal" href="installing_python.html#install-h5py-pip-cannot-be-used-directly">Install H5PY (pip cannot be used directly)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="installing_python.html#cython">Cython</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="reduction_guide.html">ORBS Reduction Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reduction_guide.html#a-2-steps-reduction">A 2 steps reduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="reduction_guide.html#creation-of-the-option-file">Creation of the option file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reduction_guide.html#required-parameters">Required parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#how-to-compute-the-step-size-in-nm-from-sitelle-s-data-files-header">How to compute the step size in nm from SITELLE&#8217;S data files header ?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="reduction_guide.html#optional-parameters">Optional parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#bias-dark-and-flat-field-correction">Bias, dark and flat field correction</a></li>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#calibration-data">Calibration data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reduction_guide.html#start-of-the-reduction-process">Start of the reduction process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reduction_guide.html#start-command">Start command</a><ul>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#choosing-your-starting-step">Choosing your starting step</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="reduction_guide.html#other-operations-with-orbs-command">Other operations with orbs command</a></li>
<li class="toctree-l3"><a class="reference internal" href="reduction_guide.html#reduction-files">Reduction files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#temporary-reduction-folder">Temporary reduction folder</a></li>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#log-file">Log file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reduction_guide.html#reduce-your-calibration-files">Reduce your calibration files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reduction_guide.html#laser-cube-wavelength-wavenumber-calibration">Laser cube (wavelength/wavenumber calibration)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#option-file">Option file</a></li>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#reduction-command">Reduction command</a></li>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#output-file">Output file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="reduction_guide.html#standard-star-photometrical-calibration">Standard star (photometrical calibration)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#id2">Option file</a></li>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#id3">Reduction command</a></li>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#id4">Output file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="reduction_guide.html#continuum-source-cube-phase-map">Continuum source cube (Phase map)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#id5">Option file</a></li>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#id6">Reduction command</a></li>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#id7">Output file</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reduction_guide.html#choosing-the-right-output">Choosing the right output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reduction_guide.html#wavelength-or-wavenumber">Wavelength or wavenumber ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="reduction_guide.html#to-apodize-or-not-to-apodize">To apodize or not to apodize ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="reduction_guide.html#why-you-might-not-want-the-spectral-calibration">Why you might not want the spectral calibration</a></li>
<li class="toctree-l3"><a class="reference internal" href="reduction_guide.html#summary">Summary</a><ul>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#the-classic-output">The classic output</a></li>
<li class="toctree-l4"><a class="reference internal" href="reduction_guide.html#the-orcs-output">The ORCS output</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reduction_guide.html#core-concepts">Core concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reduction_guide.html#file-list">File list</a></li>
<li class="toctree-l3"><a class="reference internal" href="reduction_guide.html#road-map">Road Map</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reduction_faq.html">ORBS Reduction FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reduction_faq.html#how-can-i-have-access-to-orbs-commands">How can I have access to ORBS commands ?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="reduction_faq.html#if-you-have-administrator-rights">If you have administrator rights</a></li>
<li class="toctree-l3"><a class="reference internal" href="reduction_faq.html#if-you-only-are-a-simple-user">If you only are a simple user</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="reduction_faq.html#what-is-the-binning-of-my-frames">What is the binning of my frames ?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reduction_errors.html">ORBS Common reduction errors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reduction_errors.html#malformed-sequence-of-files">Malformed sequence of files ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="reduction_errors.html#error-during-cube-alignment">Error during cube alignment ?</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="orbs_module.html">Orbs module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="orbs_module.html#orbs-class">Orbs class</a></li>
<li class="toctree-l2"><a class="reference internal" href="orbs_module.html#roadmap-class">RoadMap class</a></li>
<li class="toctree-l2"><a class="reference internal" href="orbs_module.html#step-class">Step class</a></li>
<li class="toctree-l2"><a class="reference internal" href="orbs_module.html#performance-class">Performance class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="process_module.html">Process module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="process_module.html#rawdata-class">RawData class</a></li>
<li class="toctree-l2"><a class="reference internal" href="process_module.html#interferogram-class">Interferogram class</a></li>
<li class="toctree-l2"><a class="reference internal" href="process_module.html#interferogrammerger-class">InterferogramMerger class</a></li>
<li class="toctree-l2"><a class="reference internal" href="process_module.html#calibrationlaser-class">CalibrationLaser class</a></li>
<li class="toctree-l2"><a class="reference internal" href="process_module.html#spectrum-class">Spectrum class</a></li>
<li class="toctree-l2"><a class="reference internal" href="process_module.html#phase-class">Phase class</a></li>
<li class="toctree-l2"><a class="reference internal" href="process_module.html#standard-class">Standard class</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#v3-1">v3.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#v3-1-0">v3.1.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#alignment">Alignment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosmic-rays-detection">Cosmic rays detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#overwriting-fits-files">Overwriting FITS files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transmission-function">Transmission function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v3-1-1">v3.1.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#v3-1-2">v3.1.2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v3-2">v3.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dark-and-bias-correction-for-spiomm-cam2">Dark and Bias correction for SpIOMM CAM2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#frames-transformation">Frames transformation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#orbs-script">Orbs script</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v3-3">v3.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cosmic-ray-detection-and-correction">Cosmic ray detection and correction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v3-4">v3.4</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#v-3-4-0-phase-correction">v 3.4.0:  Phase correction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#v3-4-1">v3.4.1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#correct-for-strange-phase-with-calibration-stars">Correct for strange phase with calibration stars</a></li>
<li class="toctree-l4"><a class="reference internal" href="#better-stars-interferogram-at-merging-step">Better stars interferogram at merging step</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v3-4-2">v3.4.2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bad-frames-vectors-management">Bad frames vectors management</a></li>
<li class="toctree-l4"><a class="reference internal" href="#zeros-smoothing">Zeros smoothing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v3-4-3">v3.4.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#better-fit-of-stars">Better fit of stars</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v3-4-4">v3.4.4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#various-phase-fit-degree">Various phase fit degree</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v3-4-5-stable">v3.4.5 (stable)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#v3-4-6">v3.4.6</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#enhanced-phase-determination">Enhanced phase determination</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v3-4-7">v3.4.7</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#reversed-spectrum-corection">Reversed spectrum corection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sky-transmission-correction-in-single-camera-mode">Sky transmission correction in single-camera mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="#passing-alignment-parameters-to-orbs-command">Passing alignment parameters to orbs command</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#v3-4-8">v3.4.8</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#master-combination-algorithms">Master combination algorithms</a></li>
<li class="toctree-l4"><a class="reference internal" href="#minor-modifications">Minor modifications</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v3-5">v3.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">3.5.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#alignment-and-photometry">Alignment and photometry</a></li>
<li class="toctree-l4"><a class="reference internal" href="#merging-process">Merging process</a></li>
<li class="toctree-l4"><a class="reference internal" href="#cosmic-ray-detection">Cosmic Ray Detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fft">FFT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id2">3.5.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">3.5.2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#alternative-merging-process">Alternative Merging Process</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id4">3.5.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#aperture-photometry">Aperture Photometry</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Cosmic Ray Detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mask">Mask</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tuning-parameters">Tuning parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id6">3.5.4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#astrometry-photometry">Astrometry &amp; Photometry</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v3-6">v3.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id7">3.6.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#flux-calibration">Flux Calibration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wcs-correction">WCS correction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#simplification">Simplification</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id8">3.6.2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cython-speed-optimization">Cython &amp; speed optimization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v3-7">v3.7</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id9">3.7.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#orb-a-new-core-module">ORB: A new core module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id10">3.7.1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#multi-fit-of-the-stars">Multi fit of the stars</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usno-b1-based-star-detection">USNO-B1 based star detection</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id11">3.7.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">3.7.2.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id13">3.7.2.2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#wavenumber-computation-better-integration-with-orcs">Wavenumber computation &amp; better integration with ORCS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#enhanced-phase-map-fit">Enhanced phase map fit</a></li>
<li class="toctree-l4"><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
<li class="toctree-l4"><a class="reference internal" href="#orb-s-scripts">ORB&#8217;s scripts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id14">3.7.2.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#astropy-fits-io">Astropy.fits.io</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">Miscellaneous</a></li>
<li class="toctree-l4"><a class="reference internal" href="#full-precision">Full precision</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id16">3.7.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#sitelle-data">SITELLE data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id17">3.7.4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#enhanced-flux-calibration">Enhanced flux calibration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#astropy">Astropy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id18">3.7.5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id19">Miscellaneous</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v3-8-start-of-cfht-integration">v3.8 Start of CFHT integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id20">3.8.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">3.8.1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id22"><strong>orbs</strong> script</a></li>
<li class="toctree-l4"><a class="reference internal" href="#roadmaps">RoadMaps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id23">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id24">3.8.2</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#aligner">Aligner</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id25">3.8.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#spectral-calibration">Spectral calibration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id26">3.8.4.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#update-of-the-documentation">Update of the documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#required-option-file-keywords">Required option file keywords</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v3-9-the-hdf5-miracle">v3.9 The HDF5 Miracle</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#v3-9-0">v3.9.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#scripts">Scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="#default-output-cube">Default Output Cube</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v3-10-handling-real-sitelle-s-data-cubes">v3.10: handling real SITELLE&#8217;s data cubes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#v3-10-0">v3.10.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#phase-correction">Phase correction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id27">Cosmic rays detection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id28">Miscellaneous</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Orbs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Changelog</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/changelog.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<div class="section" id="v3-1">
<h2>v3.1<a class="headerlink" href="#v3-1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="v3-1-0">
<h3>v3.1.0<a class="headerlink" href="#v3-1-0" title="Permalink to this headline">¶</a></h3>
<div class="section" id="alignment">
<h4>Alignment<a class="headerlink" href="#alignment" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="process_module.html#process.InterferogramMerger.find_alignment" title="process.InterferogramMerger.find_alignment"><code class="xref py py-meth docutils literal"><span class="pre">find_alignment()</span></code></a> has been
completly modified. There&#8217;s no more need for a list of detected
stars in the cube B (or camera 2). Stars found in cube A are
searched in cube B. The process is now faster and must be more
robust.</li>
<li><a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs.transform_cube_B" title="orbs.orbs.Orbs.transform_cube_B"><code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.transform_cube_B()</span></code></a> has also been changed to
avoid looking for stars in the cube B.</li>
</ul>
</div>
<div class="section" id="cosmic-rays-detection">
<h4>Cosmic rays detection<a class="headerlink" href="#cosmic-rays-detection" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="process_module.html#process.RawData.create_cosmic_ray_map" title="process.RawData.create_cosmic_ray_map"><code class="xref py py-meth docutils literal"><span class="pre">create_cosmic_ray_map()</span></code></a> remove a low order
polynomial on each tested interferogram vector before checking for
cosmic rays. It helps a lot in avoiding too much detected cosmic
rays on stars.</li>
</ul>
</div>
<div class="section" id="overwriting-fits-files">
<h4>Overwriting FITS files<a class="headerlink" href="#overwriting-fits-files" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="xref py py-meth docutils literal"><span class="pre">write_fits()</span></code> has a new option to overwrite a
FITS file.</li>
<li>&#8216;orbs&#8217; script can be passed the option -o to enable overwriting over
the existing FITS files.</li>
<li><a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs" title="orbs.orbs.Orbs"><code class="xref py py-class docutils literal"><span class="pre">orbs.orbs.Orbs</span></code></a>, <code class="xref py py-class docutils literal"><span class="pre">Cube</span></code> and all processing
classes have been modified to use this new option and pass it to any
self._write_fits() function.</li>
</ul>
</div>
<div class="section" id="transmission-function">
<h4>Transmission function<a class="headerlink" href="#transmission-function" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="process_module.html#process.InterferogramMerger.merge" title="process.InterferogramMerger.merge"><code class="xref py py-meth docutils literal"><span class="pre">merge()</span></code></a> has been changed to
eliminate the stars with not enough flux (set to 0.25 times the
maximum flux of the detected stars)</li>
</ul>
</div>
</div>
<div class="section" id="v3-1-1">
<h3>v3.1.1<a class="headerlink" href="#v3-1-1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="xref py py-meth docutils literal"><span class="pre">add_missing_frames()</span></code> : correction of a
minor bug when adding zeros frames for a single cube interferogram</li>
<li><code class="xref py py-meth docutils literal"><span class="pre">add_missing_frames()</span></code> and
<code class="xref py py-meth docutils literal"><span class="pre">add_missing_frames()</span></code> have been
corrected to add the correct header to the created zeros frames.</li>
</ul>
</div>
<div class="section" id="v3-1-2">
<h3>v3.1.2<a class="headerlink" href="#v3-1-2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="process_module.html#process.InterferogramMerger.find_alignment" title="process.InterferogramMerger.find_alignment"><code class="xref py py-meth docutils literal"><span class="pre">find_alignment()</span></code></a> has been
modified to use a larger box_size to detect stars during the rough
alignment step. A warning is printed if less than 80 % of the stars
can be fitted after the first optimization pass and an error is
raised if less than 50 % of the stars can be fitted.</li>
<li><strong>orbs</strong> script can be passed the option -p or &#8211;phase to enter the
number of points to use for space correction. If 0 is entered no
phase correction will be done.</li>
</ul>
</div>
</div>
<div class="section" id="v3-2">
<h2>v3.2<a class="headerlink" href="#v3-2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dark-and-bias-correction-for-spiomm-cam2">
<h3>Dark and Bias correction for SpIOMM CAM2<a class="headerlink" href="#dark-and-bias-correction-for-spiomm-cam2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="xref py py-meth docutils literal"><span class="pre">create_interferogram()</span></code> : Dark and
Bias are now removed using their precise temperature and a
calibrated function. The temperature of the frames (bias frames,
dark frames and frames to be corrected) must be recorded in the
header of the files with the keyword CCD-TEMP.</li>
<li><strong>orbs-tempreader</strong> script: This script has been created to read the
temperature files created during an observing run and write the
temperature of the files in the headers of the frames. It must be
used in each folder where the temperature are needed (bias, dark and
cam2 folders)</li>
<li><strong>config.orb</strong> : new keywords (DARK_CALIB_PARAM_A, DARK_CALIB_PARAM_B,
DARK_CALIB_PARAM_C, BIAS_CALIB_PARAM_A, BIAS_CALIB_PARAM_B) have
been added for the calibration coefficients of the bias and the
dark. They have been computed from calibrated bias and dark curves :
I(T) = f(T).</li>
</ul>
</div>
<div class="section" id="frames-transformation">
<h3>Frames transformation<a class="headerlink" href="#frames-transformation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="xref py py-meth docutils literal"><span class="pre">transform_frame()</span></code> has been completely changed and
optimized using scipy.ndimage fast routines for image
transformation. The time consumption of the transformation step has
been dramatically decreased : this process is now more than 10 times
faster.</li>
</ul>
</div>
<div class="section" id="orbs-script">
<h3>Orbs script<a class="headerlink" href="#orbs-script" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>orbs</strong> script option -r &#8211;raw has been removed and replaced by the
option &#8211;nostar.Using the option -s (single reduction : only the
cam1 cube is reduced) it is now possible to reduce one or both cubes
without stars. The alignment steps are skipped and the default
alignment parameters are used during the merging process.</li>
</ul>
</div>
</div>
<div class="section" id="v3-3">
<h2>v3.3<a class="headerlink" href="#v3-3" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cosmic-ray-detection-and-correction">
<h3>Cosmic ray detection and correction<a class="headerlink" href="#cosmic-ray-detection-and-correction" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="process_module.html#process.RawData.create_cosmic_ray_map" title="process.RawData.create_cosmic_ray_map"><code class="xref py py-meth docutils literal"><span class="pre">create_cosmic_ray_map()</span></code></a> is now capable of
detecting ver faint cosmic rays without overdetecting cosmic rays in
stars. Planes and satellites are also detected.</li>
<li>Cosmic rays corrected by
<code class="xref py py-meth docutils literal"><span class="pre">create_interferogram()</span></code> are now replaced by
a weighted average of the neighbourhood. Weights are defined using a
gaussian kernel. The kernel degree (i.e. neighbourhood radius) can
be choosen.</li>
</ul>
</div>
</div>
<div class="section" id="v3-4">
<h2>v3.4<a class="headerlink" href="#v3-4" title="Permalink to this headline">¶</a></h2>
<div class="section" id="v-3-4-0-phase-correction">
<h3>v 3.4.0:  Phase correction<a class="headerlink" href="#v-3-4-0-phase-correction" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><a class="reference internal" href="process_module.html#process.InterferogramMerger.merge" title="process.InterferogramMerger.merge"><code class="xref py py-meth docutils literal"><span class="pre">merge()</span></code></a> has been modified to
create a small data cube containing the interferograms of choosen
stars. Those interferograms can be used by
<a class="reference internal" href="process_module.html#process.Interferogram.compute_spectrum" title="process.Interferogram.compute_spectrum"><code class="xref py py-meth docutils literal"><span class="pre">compute_spectrum()</span></code></a> to recover the
first order coefficient of the phase. This way the phase is not
computed for each pixel but a general correction is made.</p>
</li>
<li><p class="first"><a class="reference internal" href="process_module.html#process.Interferogram.compute_spectrum" title="process.Interferogram.compute_spectrum"><code class="xref py py-meth docutils literal"><span class="pre">compute_spectrum()</span></code></a> has been modified
to compute the mean first order coefficient given a cube of stars
interferogram.</p>
</li>
<li><p class="first"><code class="xref py py-meth docutils literal"><span class="pre">transform_frame()</span></code> has been modified to compute the
phase fo each pixel given a phase map which gives the zeroth order
of the polynomial function of the phase for each pixel and the first
order coefficient. Both parameters (the phase map and the first
order coefficient) must be given to avoid a pixel by pixel phase
computation which can be unreliable.</p>
</li>
<li><p class="first"><a class="reference internal" href="process_module.html#process.Phase" title="process.Phase"><code class="xref py py-class docutils literal"><span class="pre">Phase</span></code></a>: A new class has been created to manage
phase data cubes. Those data cubes are useful to recover the phase
maps. Three methods have been created:
<a class="reference internal" href="process_module.html#process.Phase.create_phase_maps" title="process.Phase.create_phase_maps"><code class="xref py py-meth docutils literal"><span class="pre">create_phase_maps()</span></code></a> which create the phase
maps from a phase cube, <a class="reference internal" href="process_module.html#process.Phase.smooth_phase_map" title="process.Phase.smooth_phase_map"><code class="xref py py-meth docutils literal"><span class="pre">smooth_phase_map()</span></code></a>
which smooth the values of the phase map of 0th order (remember that
phase values are defined modulo PI) and
<a class="reference internal" href="process_module.html#process.Phase.fit_phase_map" title="process.Phase.fit_phase_map"><code class="xref py py-meth docutils literal"><span class="pre">fit_phase_map()</span></code></a> which fit the created
smoothed phase map of 0th order to remove noisy data.</p>
</li>
<li><p class="first"><code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.full_reduction()</span></code> and
<code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.single_reduction()</span></code> use computed phase maps by
default. An external phase map of order 0 can be given if it has
been computed (e.g. from a flat cube).</p>
</li>
<li><dl class="first docutils">
<dt><strong>orbs</strong> script option -s replaced by the options -1 or -2 in order</dt>
<dd><p class="first last">to reduce only the camera 1 cube (-1) or the camera 2 cube
(-2). &#8211;flat option added to reduce flat cubes and obtain only
their phase map (spectrum is not computed)</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="v3-4-1">
<h3>v3.4.1<a class="headerlink" href="#v3-4-1" title="Permalink to this headline">¶</a></h3>
<div class="section" id="correct-for-strange-phase-with-calibration-stars">
<h4>Correct for strange phase with calibration stars<a class="headerlink" href="#correct-for-strange-phase-with-calibration-stars" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="process_module.html#process.Interferogram.compute_spectrum" title="process.Interferogram.compute_spectrum"><code class="xref py py-meth docutils literal"><span class="pre">compute_spectrum()</span></code></a> no longer use
stars interferogram to recover the first order coefficient but use
the mean of the first order phase map. The precision is far better.</li>
</ul>
</div>
<div class="section" id="better-stars-interferogram-at-merging-step">
<h4>Better stars interferogram at merging step<a class="headerlink" href="#better-stars-interferogram-at-merging-step" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="process_module.html#process.InterferogramMerger.merge" title="process.InterferogramMerger.merge"><code class="xref py py-meth docutils literal"><span class="pre">merge()</span></code></a> compute better stars
interferograms. <code class="xref py py-meth docutils literal"><span class="pre">fit_stars_in_frame()</span></code> and
<code class="xref py py-meth docutils literal"><span class="pre">fit_gaussian2d()</span></code> have been modified to give better
fitted photometry points and retry a fit if it fails because the
stars is not centered in the box.</li>
</ul>
</div>
</div>
<div class="section" id="v3-4-2">
<h3>v3.4.2<a class="headerlink" href="#v3-4-2" title="Permalink to this headline">¶</a></h3>
<div class="section" id="bad-frames-vectors-management">
<h4>Bad frames vectors management<a class="headerlink" href="#bad-frames-vectors-management" title="Permalink to this headline">¶</a></h4>
<p>The idea is to use the different processes to detect bad frames and
collect their bad frames vectors to suppress bad frames prior to the
transformation of the interferograms.</p>
<ul class="simple">
<li><a class="reference internal" href="process_module.html#process.InterferogramMerger.merge" title="process.InterferogramMerger.merge"><code class="xref py py-meth docutils literal"><span class="pre">merge()</span></code></a> creates a bad frames
vector using a threshold of transmission (70%).</li>
<li><code class="xref py py-meth docutils literal"><span class="pre">create_bad_frames_vector()</span></code> has been created to
collect the bad frames vector created by various processes and
create a full bad frames vector which can be passed
<a class="reference internal" href="process_module.html#process.Interferogram.compute_spectrum" title="process.Interferogram.compute_spectrum"><code class="xref py py-meth docutils literal"><span class="pre">compute_spectrum()</span></code></a> and
<code class="xref py py-meth docutils literal"><span class="pre">transform_interferogram()</span></code> in order to remove all the
detected bad frames prior to transform the interferograms.</li>
</ul>
</div>
<div class="section" id="zeros-smoothing">
<h4>Zeros smoothing<a class="headerlink" href="#zeros-smoothing" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="xref py py-meth docutils literal"><span class="pre">transform_interferogram()</span></code> has been modified to do
what we call the zeros smoothing. The objective is to reduce ringing
due to steep transition between &#8216;normal&#8217; points and zeros. The
interferogram is multiplied by a function which smoothes the
transition between zeros parts and &#8216;good parts&#8217; of the
interferogram. The good parts symmetrical to the zeros parts (The
ZPD is the center of symmetry) are multiplied by 2. And the same
transition is applied from parts multpilied by 2 to parts
multplied by 1. This way the same weight is given to each and every
point of the interferogram (points multiplied by zero have their
symmetrical point multplied by 2). The degree of smoothing can be
choosen (smoothing_deg option). A higher degree means a smoother
transition between one part to another but may reduce the SNR.</li>
<li><code class="xref py py-meth docutils literal"><span class="pre">smooth()</span></code> can now smooth a vector using a gaussian
kernel convolution (much faster).</li>
</ul>
</div>
</div>
<div class="section" id="v3-4-3">
<h3>v3.4.3<a class="headerlink" href="#v3-4-3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Minor bugs corrections</li>
</ul>
<div class="section" id="better-fit-of-stars">
<h4>Better fit of stars<a class="headerlink" href="#better-fit-of-stars" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="xref py py-meth docutils literal"><span class="pre">fit_stars_in_frame()</span></code> and
<code class="xref py py-meth docutils literal"><span class="pre">fit_gaussian2d()</span></code> modified to give better fitting
results. Especially for the method
<a class="reference internal" href="process_module.html#process.InterferogramMerger.merge" title="process.InterferogramMerger.merge"><code class="xref py py-meth docutils literal"><span class="pre">merge()</span></code></a> which depends a lot on
a good fit of all the detected stars.</li>
</ul>
</div>
</div>
<div class="section" id="v3-4-4">
<h3>v3.4.4<a class="headerlink" href="#v3-4-4" title="Permalink to this headline">¶</a></h3>
<div class="section" id="various-phase-fit-degree">
<h4>Various phase fit degree<a class="headerlink" href="#various-phase-fit-degree" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first"><a class="reference internal" href="process_module.html#process.Phase.create_phase_maps" title="process.Phase.create_phase_maps"><code class="xref py py-meth docutils literal"><span class="pre">create_phase_maps()</span></code></a> and
<a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs.compute_spectrum" title="orbs.orbs.Orbs.compute_spectrum"><code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.compute_spectrum()</span></code></a> modified to use any order of
the polynomial fit to the phase</p>
</li>
<li><dl class="first docutils">
<dt><strong>config.orb</strong>: New keyword PHASE_FIT_DEG to configure the desired</dt>
<dd><p class="first last">degree of the polynomial fit o the
phase. <a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs.__init__" title="orbs.orbs.Orbs.__init__"><code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.__init__()</span></code></a> modified to use this
keyword.</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="v3-4-5-stable">
<h3>v3.4.5 (stable)<a class="headerlink" href="#v3-4-5-stable" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Minor modifications of <a class="reference internal" href="process_module.html#process.InterferogramMerger.merge" title="process.InterferogramMerger.merge"><code class="xref py py-meth docutils literal"><span class="pre">merge()</span></code></a>
to make it more stable</li>
<li>PHASE_FIT_DEG in <strong>config.orb</strong> set to 1</li>
</ul>
<p>This version is considered as stable.</p>
</div>
<div class="section" id="v3-4-6">
<h3>v3.4.6<a class="headerlink" href="#v3-4-6" title="Permalink to this headline">¶</a></h3>
<div class="section" id="enhanced-phase-determination">
<h4>Enhanced phase determination<a class="headerlink" href="#enhanced-phase-determination" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="xref py py-meth docutils literal"><span class="pre">get_lr_phase()</span></code> window changed to a NORTON_BEER 2.0
to get a phase with much less artefacts: give a much more precise
phase and thus much more precise phase maps.</li>
<li><a class="reference internal" href="process_module.html#process.Interferogram.compute_phase_coeffs_vector" title="process.Interferogram.compute_phase_coeffs_vector"><code class="xref py py-meth docutils literal"><span class="pre">compute_phase_coeffs_vector()</span></code></a> use a
cleaner way to get the median phase coefficient for each phase map:
used points are choosen from the residual map created by
<a class="reference internal" href="process_module.html#process.Phase.create_phase_maps" title="process.Phase.create_phase_maps"><code class="xref py py-meth docutils literal"><span class="pre">create_phase_maps()</span></code></a> and sigma-clipped before the mean
is taken from a well defined gaussian-like distribution of phase
coefficients.</li>
</ul>
</div>
</div>
<div class="section" id="v3-4-7">
<h3>v3.4.7<a class="headerlink" href="#v3-4-7" title="Permalink to this headline">¶</a></h3>
<div class="section" id="reversed-spectrum-corection">
<h4>Reversed spectrum corection<a class="headerlink" href="#reversed-spectrum-corection" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The problem comes from the 0th order phase map which is
defined modulo PI. An addition of PI on the phase vector (thus on
the 0th order of the polynomial) reverses the returned spectrum.</p>
</div>
<ul class="simple">
<li><a class="reference internal" href="process_module.html#process.Interferogram.compute_spectrum" title="process.Interferogram.compute_spectrum"><code class="xref py py-meth docutils literal"><span class="pre">compute_spectrum()</span></code></a> modified to avoid the
spectrum to be reversed (values are negative instead of positive)
after phase correction. Spectrum polarity is checked using a mean
interferogram over the whole cube. If the resulting spectrum is
reversed the whole 0th order phase map is added PI.</li>
</ul>
</div>
<div class="section" id="sky-transmission-correction-in-single-camera-mode">
<h4>Sky transmission correction in single-camera mode<a class="headerlink" href="#sky-transmission-correction-in-single-camera-mode" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="process_module.html#process.Interferogram.create_correction_vectors" title="process.Interferogram.create_correction_vectors"><code class="xref py py-meth docutils literal"><span class="pre">create_correction_vectors()</span></code></a> created to get
the correction vectors (sky transmission and added light) and
correct interferograms in single camera-mode. Now <strong>phase
correction</strong> and <strong>sky transmission correction</strong> are available in
single camera-mode (but less precise than in binocular mode).</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The sky transmission vector is computed from star
photometry. Its precision is good but it must be corrected for ZPD
because with only one camera and near the ZPD stars interferograms
are not &#8216;flat&#8217; anymore. The &#8216;added light&#8217; vector is computed from a
median &#8216;interferogram&#8217; It has also to be corrected near the ZPD.</p>
</div>
<ul class="simple">
<li>minor bugs correction and enhancements</li>
</ul>
</div>
<div class="section" id="passing-alignment-parameters-to-orbs-command">
<h4>Passing alignment parameters to orbs command<a class="headerlink" href="#passing-alignment-parameters-to-orbs-command" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><strong>orbs</strong> script: new option : <strong>&#8211;align</strong> to pass precomputed alignement
parameters. Useful in the case of the computation of a FLAT cube
(with no possible alignment) if the alignment parameters are already
knowm from the reduction of an object taken during the same mission.</li>
</ul>
</div>
</div>
<div class="section" id="v3-4-8">
<h3>v3.4.8<a class="headerlink" href="#v3-4-8" title="Permalink to this headline">¶</a></h3>
<div class="section" id="master-combination-algorithms">
<h4>Master combination algorithms<a class="headerlink" href="#master-combination-algorithms" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first"><code class="xref py py-meth docutils literal"><span class="pre">_create_master_frame()</span></code> created to use
better combination algorithms for the creation of master bias, master
dark and master flat. Some pixels are rejected using a rejection
algorithm before the images are combined using a median or an
average function. The rejection algorithms proposed are:</p>
<blockquote>
<div><ul class="simple">
<li>Min-Max rejection</li>
<li>Sigma-Clipping</li>
<li>Average Sigma-Clipping (default)</li>
</ul>
</div></blockquote>
<p>Master frames are also written to the disk for checking
purpose. Note that those rejection algorithm have been inspired by
the IRAF function combine.</p>
</li>
<li><p class="first"><code class="xref py py-meth docutils literal"><span class="pre">detect_stars()</span></code> also uses
<code class="xref py py-meth docutils literal"><span class="pre">_create_master_frame()</span></code> to combine frames.</p>
</li>
</ul>
</div>
<div class="section" id="minor-modifications">
<h4>Minor modifications<a class="headerlink" href="#minor-modifications" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>DATA_FRAMES in <code class="xref py py-meth docutils literal"><span class="pre">detect_stars()</span></code> changed from
10 to 30. Help in finding more stars in some cubes.</li>
<li><code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs._create_list_from_dir()</span></code> now check if all the FITS
files in the directory have the same shape.</li>
<li><a class="reference internal" href="process_module.html#process.RawData.correct_frame" title="process.RawData.correct_frame"><code class="xref py py-meth docutils literal"><span class="pre">correct_frame()</span></code></a> and
<code class="xref py py-meth docutils literal"><span class="pre">create_interferogram()</span></code> modified to
correct for bias, flat and dark even if one of them are not given
(before, without biases no correction at all would have been made)</li>
<li><code class="xref py py-meth docutils literal"><span class="pre">correct_filter()</span></code> modified when filter min
or max are outside the spectrum.</li>
<li><a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs.__init__" title="orbs.orbs.Orbs.__init__"><code class="xref py py-class docutils literal"><span class="pre">orbs.orbs.Orbs.__init__</span></code></a> prints modules versions</li>
<li><a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs.__init__" title="orbs.orbs.Orbs.__init__"><code class="xref py py-class docutils literal"><span class="pre">orbs.orbs.Orbs.__init__</span></code></a> modified. It is now possible to
change configuration options for a particular reduction using the
option file. Keywords are the same.</li>
<li><a class="reference internal" href="process_module.html#process.RawData.correct_frame" title="process.RawData.correct_frame"><code class="xref py py-meth docutils literal"><span class="pre">correct_frame()</span></code></a> modified to avoid strange
behaviour when dark level is too low.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="v3-5">
<h2>v3.5<a class="headerlink" href="#v3-5" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>3.5.0<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="section" id="alignment-and-photometry">
<h4>Alignment and photometry<a class="headerlink" href="#alignment-and-photometry" title="Permalink to this headline">¶</a></h4>
<p><code class="xref py py-class docutils literal"><span class="pre">Astrometry</span></code> class created with a whole new
astrometry module. This module is used for all astrometrical processes
(star position detection for alignment and star
photometry). Astrometry and photometry precision are now a lot better.</p>
</div>
<div class="section" id="merging-process">
<h4>Merging process<a class="headerlink" href="#merging-process" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Single camera reduction: A new step of reduction has been added to
better correct single camera interferograms for variations of
transmission and light refracted on clouds.</li>
<li>2-camera reduction without merging frames (optional):
<a class="reference internal" href="process_module.html#process.InterferogramMerger.merge" title="process.InterferogramMerger.merge"><code class="xref py py-meth docutils literal"><span class="pre">merge()</span></code></a> has a better way of
correct interferograms without merging frames. Camera 2 frames are
used to create correction vectors but are not merged to the frames
of the camera 1.</li>
</ul>
</div>
<div class="section" id="cosmic-ray-detection">
<h4>Cosmic Ray Detection<a class="headerlink" href="#cosmic-ray-detection" title="Permalink to this headline">¶</a></h4>
<p><a class="reference internal" href="process_module.html#process.RawData.create_cosmic_ray_map" title="process.RawData.create_cosmic_ray_map"><code class="xref py py-meth docutils literal"><span class="pre">create_cosmic_ray_map()</span></code></a>. Completly changed
and upgraded using ORUS simulated cubes. Faster and far more
efficient. 95% of good detection over CR&#8217;s with an energy higher than
the median CR energy. Small number of false detections. Less problems
with stars and ZPD.</p>
</div>
<div class="section" id="fft">
<h4>FFT<a class="headerlink" href="#fft" title="Permalink to this headline">¶</a></h4>
<p>&#8216;Zeros smoothing&#8217; step in <code class="xref py py-meth docutils literal"><span class="pre">transform_interferogram()</span></code>
modified to avoid correcting very small zeros parts (CR, bad frames)
which was creating noise.</p>
</div>
</div>
<div class="section" id="id2">
<h3>3.5.1<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Minor bugs correction</p>
</div>
<div class="section" id="id3">
<h3>3.5.2<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="section" id="alternative-merging-process">
<h4>Alternative Merging Process<a class="headerlink" href="#alternative-merging-process" title="Permalink to this headline">¶</a></h4>
<p>Addition of an alternative merging process
(<a class="reference internal" href="process_module.html#process.InterferogramMerger.alternative_merge" title="process.InterferogramMerger.alternative_merge"><code class="xref py py-meth docutils literal"><span class="pre">alternative_merge()</span></code></a>): in fact,
this is the basic merging process which makes no use of star
photometry. This alternative way of merging, somehow more noisy than
the regular way, is more robust and might be the best guess if there&#8217;s
not enough good stars in the field or when all the fiel is covered
with intense emission lines. It is recommanded to always do the
reduction this way and the regular way to take what seems the best
cube.</p>
<p>The new option in the orbs launch command is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">--</span><span class="n">alt_merge</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id4">
<h3>3.5.3<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="section" id="aperture-photometry">
<h4>Aperture Photometry<a class="headerlink" href="#aperture-photometry" title="Permalink to this headline">¶</a></h4>
<p>An aperture photometry function
(<code class="xref py py-meth docutils literal"><span class="pre">aperture_photometry()</span></code>) has been designed to get
a far more robust and precise photometry of the stars during the
&#8216;normal&#8217; merging process. Sky transmission vector precision is now a
lot better and do not need any more smoothing.</p>
</div>
<div class="section" id="id5">
<h4>Cosmic Ray Detection<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<p>New step frame check added (removed a long time ago but added once
again) to get rid of star detection in some frames due to disalignment
and the size of interferometric fringes. Avoid getting bad photometry
on stars.</p>
</div>
<div class="section" id="mask">
<h4>Mask<a class="headerlink" href="#mask" title="Permalink to this headline">¶</a></h4>
<p>Frames created by ORBS are coupled with a mask frame. Mask frames are
used to get the exact position of all the pixels affected by the
cosmic rays correction. Cosmic rays correction in stars creates bad
pixels that have to be taken into account during the photometry
process t avoid too deviant values.</p>
</div>
<div class="section" id="tuning-parameters">
<h4>Tuning parameters<a class="headerlink" href="#tuning-parameters" title="Permalink to this headline">¶</a></h4>
<p>It is now possible to tune the parameters of some methods externally
(in the option file). To tune a &#8216;tunable&#8217; parameter you must use the
keyword TUNE, give the full name of the method parameter
(class.method.parameter_name) and its new value:</p>
<div class="highlight-python"><div class="highlight"><pre>TUNE InterferogramMerger.find_alignement.BOX_SIZE_COEFF 7.
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All the parameters are not tunable: this option has to be
implemented in the method itself with the method
<code class="xref py py-meth docutils literal"><span class="pre">_get_tuning_parameter()</span></code>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This possibility is intented be used only for the
reduction of some particular cubes. If the default value of a
paramater has to be changed it is better to do it in the method
itself.</p>
</div>
</div>
</div>
<div class="section" id="id6">
<h3>3.5.4<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="section" id="astrometry-photometry">
<h4>Astrometry &amp; Photometry<a class="headerlink" href="#astrometry-photometry" title="Permalink to this headline">¶</a></h4>
<p>Astrometry and photometry processes (fit and aperture) upgraded. They
know meet the theoretical error and their returned reduced-chi-square
is far better. All dependant processes in the process module have been
updated to use this better information and filter bad fitted stars.</p>
</div>
</div>
</div>
<div class="section" id="v3-6">
<h2>v3.6<a class="headerlink" href="#v3-6" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id7">
<h3>3.6.0<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="section" id="flux-calibration">
<h4>Flux Calibration<a class="headerlink" href="#flux-calibration" title="Permalink to this headline">¶</a></h4>
<p>Flux calibration has been added. <a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs.calibrate_spectrum" title="orbs.orbs.Orbs.calibrate_spectrum"><code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.calibrate_spectrum()</span></code></a>
replace the old function <code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.correct_spectrum()</span></code>. The path
to a standard spectrum reduced by ORBS must be given (STDPATH). This
can be achieved by reducing a standard cube using the option
&#8211;standard. The standard name must also be given in the option file
(STDNAME). This must be recorded in the standard table
(orbs/data/std_table). Standard spectra form MASSEY et al. 1988 and
CALSPEC have been added to the data of ORBS so that they can be used
to do a flux calibration. To do a flux calibration the steps are thus:</p>
<ol class="arabic simple">
<li>Reduce standard cube with option &#8211;standard</li>
<li>Give the path to the standard spectrum (STDPATH) and the name of
the standard (STDNAME) in the option file of the cube yo want to
calibrate</li>
<li>Reduce the cube you want to calibrate (or only redo the last step)</li>
</ol>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="process_module.html#process.Spectrum.get_flux_calibration_vector" title="process.Spectrum.get_flux_calibration_vector"><code class="xref py py-meth docutils literal"><span class="pre">get_flux_calibration_vector()</span></code></a></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The standard cube must be reduced with the same number of
camera as the cube you want to reduce.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A new class has been created to manage standard spectra:
<a class="reference internal" href="process_module.html#process.Standard" title="process.Standard"><code class="xref py py-class docutils literal"><span class="pre">Standard</span></code></a></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Final spectrum cube is now rescaled pixel to pixel in order
to keep the same energy at the input and at the output of the
reduction process. With 2 cubes we use the scale map. The scale
map is the sum of the deep frame of both cubes ; The deep frame
of cube A is scaled by the modulation coefficient which comes
from the difference of gain between both cameras. For a single
cube reduction, its own deep frame is used.</p>
</div>
</div>
<div class="section" id="wcs-correction">
<h4>WCS correction<a class="headerlink" href="#wcs-correction" title="Permalink to this headline">¶</a></h4>
<p>If the ra/dec (TARGETR/TARGETD) and x/y (TARGETX/TARGETY)
corresponding position of a target near the center of the frame is
given, WCS coords of the cube are updated at the last step (Calibration step
step):</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">get_corrected_wcs()</span></code></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">An <strong>internet connection</strong> must be available to correct WCS
because the USNO database is used to get precise astrometric
coordinates of the stars in the field.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">A new module is now required to launch ORBS: PyWCS (see
<a class="reference external" href="http://stsdas.stsci.edu/astrolib/pywcs/">http://stsdas.stsci.edu/astrolib/pywcs/</a>)</p>
</div>
</div>
<div class="section" id="simplification">
<h4>Simplification<a class="headerlink" href="#simplification" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="xref py py-class docutils literal"><span class="pre">core.Indexer</span></code> created to index reduction files and get
their location easily in <code class="xref py py-class docutils literal"><span class="pre">orbs.Orbs</span></code>.</li>
<li>No more quadrants: Reduction of big data cubes has been simplified
and do not save reduced files in quadrants any more. Big data cubes
are thus handled as small data cubes. Reduced by quadrants but saved
as one set of frames.</li>
</ul>
</div>
</div>
<div class="section" id="id8">
<h3>3.6.2<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="section" id="cython-speed-optimization">
<h4>Cython &amp; speed optimization<a class="headerlink" href="#cython-speed-optimization" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><code class="xref py py-meth docutils literal"><span class="pre">utils.transform_frame()</span></code> has been modified to do only one
geometrical transformation instead of a set of transformations
(tip-tilt then translations then rotation etc.). Coordinates
transformation function (<code class="xref py py-meth docutils literal"><span class="pre">cutils.transform_A_to_B()</span></code>) written in
Cython to optimize processing speed .</li>
<li>core functions for fitting stars (<code class="xref py py-meth docutils literal"><span class="pre">cutils.gaussian_array2d()</span></code>
and <code class="xref py py-meth docutils literal"><span class="pre">cutils.surface_value()</span></code>) have been transcripted to Cython
for faster processing.</li>
<li>lots of functions have been cythonized to improve the overall speed.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="v3-7">
<h2>v3.7<a class="headerlink" href="#v3-7" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id9">
<h3>3.7.0<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<div class="section" id="orb-a-new-core-module">
<h4>ORB: A new core module<a class="headerlink" href="#orb-a-new-core-module" title="Permalink to this headline">¶</a></h4>
<p>ORBS core classes and functions (core.py, utils.py and cutils.pyx)
have been moved to a module of shared core libraries: ORB. This way,
ORBS, ORCS, OACS, IRIS and ORUS can share the same core module without
importing ORBS entirely each time. Conceptually ORBS, like the others,
just wraps around ORB module and is not any more the central part of
the whole suite of softwares.</p>
</div>
</div>
<div class="section" id="id10">
<h3>3.7.1<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<div class="section" id="multi-fit-of-the-stars">
<h4>Multi fit of the stars<a class="headerlink" href="#multi-fit-of-the-stars" title="Permalink to this headline">¶</a></h4>
<p>The functions based on star fitting have been updated to take full
advantage of the multi_fit mode of
<code class="xref py py-meth docutils literal"><span class="pre">orb.astrometry.fit_stars_in_frame()</span></code>. Stars are fitted all
together based on the idea that the position pattern is good but may
be shifted, rotated or zoomed. The stars share also the same
FWHM. This update has made ORBS far more robust and precise on the
alignment and merge processes. Even a cube like ORION which contains
only few stars with very bad SNR can be perfectly aligned.</p>
</div>
<div class="section" id="usno-b1-based-star-detection">
<h4>USNO-B1 based star detection<a class="headerlink" href="#usno-b1-based-star-detection" title="Permalink to this headline">¶</a></h4>
<p>It is now possible to use a star catalogue like USNO-B1 to detect
stars in the cube. It is not a default behaviour because extended
emission region contains virtually no catalogued stars. This option
can be useful for galaxies to avoid the confision of HII regions and
stars.</p>
</div>
</div>
<div class="section" id="id11">
<h3>3.7.2<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>Minor bugs fix. This version is considered as a nearly stable version
ready for release.</p>
</div>
<div class="section" id="id12">
<h3>3.7.2.1<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Better integration of the multi fit mode (now used most of the time)</li>
<li>option file keyword added: TRYCAT that must be set to 1 to use the
USNO-B1 catalogue for star detection.</li>
<li>Better treatment of NaNs. Begin to remove the use of zeros in place
of NaNs.</li>
<li>doc update</li>
<li>bug fix</li>
</ul>
</div>
<div class="section" id="id13">
<h3>3.7.2.2<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<div class="section" id="wavenumber-computation-better-integration-with-orcs">
<h4>Wavenumber computation &amp; better integration with ORCS<a class="headerlink" href="#wavenumber-computation-better-integration-with-orcs" title="Permalink to this headline">¶</a></h4>
<p>The whole spectrum computation process can now be done in wavenumber
(useful to avoid the mutiple interpolation nescessary to move from a
regular wavenumber space to an iregular wavelength space back and
forth).</p>
<p>It is also possible to compute an uncalibrated spectrum. This way
there is absolutly no interpolation made during the spectrum
computation. The output can be used by ORCS directly and ORCS itself
does not have any interpolation to do for the extraction of the lines
parameters. <strong>This ensure that the spectral information is not distorded
at all during the process</strong>.</p>
<p>The filter correction during the calibration process takes into
account the fact that no wavelength calibration has been done.</p>
<ul class="simple">
<li>Important modified methods:<ul>
<li><a class="reference internal" href="process_module.html#process.Interferogram.compute_spectrum" title="process.Interferogram.compute_spectrum"><code class="xref py py-meth docutils literal"><span class="pre">compute_spectrum()</span></code></a></li>
<li><a class="reference internal" href="process_module.html#process.Spectrum.calibrate" title="process.Spectrum.calibrate"><code class="xref py py-meth docutils literal"><span class="pre">calibrate()</span></code></a></li>
</ul>
</li>
<li>New keyword added in the option file: WAVENUMBER, WAVE_CALIB</li>
</ul>
</div>
<div class="section" id="enhanced-phase-map-fit">
<h4>Enhanced phase map fit<a class="headerlink" href="#enhanced-phase-map-fit" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="process_module.html#process.Phase.fit_phase_map" title="process.Phase.fit_phase_map"><code class="xref py py-meth docutils literal"><span class="pre">fit_phase_map()</span></code></a> has been enhanced to give
better results and use the residual map on phase fit.</li>
</ul>
</div>
<div class="section" id="miscellaneous">
<h4>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs.__init__" title="orbs.orbs.Orbs.__init__"><code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.__init__()</span></code></a> simplified by the use of
<code class="xref py py-class docutils literal"><span class="pre">orb.core.OptionFile</span></code> previously used only by
<code class="xref py py-class docutils literal"><span class="pre">orcs.orcs.SpectralCube()</span></code></li>
<li>doc updated</li>
</ul>
</div>
<div class="section" id="orb-s-scripts">
<h4>ORB&#8217;s scripts<a class="headerlink" href="#orb-s-scripts" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>move ORB&#8217;s scripts (dstack, combine, rollxz, rollyz, reduce) from
orbs/scripts to orb/scripts so that only ORBS specific scripts are
in orbs/scripts.</li>
<li>create <strong>unstack</strong> script to unstack a cube into a set of frames</li>
</ul>
</div>
</div>
<div class="section" id="id14">
<h3>3.7.2.3<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<div class="section" id="astropy-fits-io">
<h4>Astropy.fits.io<a class="headerlink" href="#astropy-fits-io" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>PyFITS is now part of Astropy (<a class="reference external" href="http://www.astropy.org/">http://www.astropy.org/</a>). PyFITS
library will not be used anymore and the required import have been
changed to astropy.fits.io.</li>
<li>Bugs with new version of pyfits fixed</li>
</ul>
</div>
<div class="section" id="id15">
<h4>Miscellaneous<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>FITS keywords updated for standard flux calibration (standard name,
standard file path, mean flambda calibration). Target ra, dec, x, y,
step number, ORBS version and ORBS option file name also added.</li>
</ul>
</div>
<div class="section" id="full-precision">
<h4>Full precision<a class="headerlink" href="#full-precision" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first"><a class="reference internal" href="process_module.html#process.InterferogramMerger.find_alignment" title="process.InterferogramMerger.find_alignment"><code class="xref py py-meth docutils literal"><span class="pre">find_alignment()</span></code></a> default
behaviour changed. The alignement pass for tip and tilt angles is
not anymore by default. It is still possible to do it by adding this
line in the option file:</p>
<div class="highlight-python"><div class="highlight"><pre>TUNE InterferogramMerger.find_alignment.FULL_PRECISION 1
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="id16">
<h3>3.7.3<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<div class="section" id="sitelle-data">
<h4>SITELLE data<a class="headerlink" href="#sitelle-data" title="Permalink to this headline">¶</a></h4>
<div class="section" id="sitelle-image-mode">
<h5>Sitelle image mode<a class="headerlink" href="#sitelle-image-mode" title="Permalink to this headline">¶</a></h5>
<p>Using the SITELLE&#8217;s configuration file config.sitelle.orb and thus
having the keyword INSTRUMENT_NAME set to SITELLE enables the sitelle
mode. The only modification which has to be done was to pass two new
options to <code class="xref py py-meth docutils literal"><span class="pre">orb.Tools._create_list_from_dir()</span></code>: image_mode and
chip_index (see ORB documentation). This is done during ORBS init:
<a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs.__init__" title="orbs.orbs.Orbs.__init__"><code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.__init__()</span></code></a>.</p>
</div>
<div class="section" id="prebinning">
<h5>Prebinning<a class="headerlink" href="#prebinning" title="Permalink to this headline">¶</a></h5>
<p>Used for faster computation of big data set. It
can also be useful if the user simply wants binned data. At the user
level only one option must be passed to the option file:</p>
<div class="highlight-python"><div class="highlight"><pre>PREBINNING 2 # Data is prebinned by 2
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The real binning of the original data must be kept to the
same values. The user must no modify the the values of BINCAM1 and
BINCAM2.</p>
</div>
<p>Modification of <a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs.__init__" title="orbs.orbs.Orbs.__init__"><code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.__init__()</span></code></a> which gives the
prebinning option to <code class="xref py py-meth docutils literal"><span class="pre">orb.Tools._create_list_from_dir()</span></code>. The
final data binning is also handled at the init level : the real
binning of each camera is multiplied by the prebinning size.</p>
</div>
</div>
</div>
<div class="section" id="id17">
<h3>3.7.4<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<div class="section" id="enhanced-flux-calibration">
<h4>Enhanced flux calibration<a class="headerlink" href="#enhanced-flux-calibration" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Flux calibration is now much more precise because the whole spectrum
are no more rescaled only from deep frames or energy map but on the
whole conservation of the energy from the input to the output. This
relies on the use of both deep frame and energy maps and assert,
just before the calibration that E(I) / M(I) = E(S) / M(S) if we
consider that E() is the energy map and M() is the deep frame of the
interferogram cube I or the spectral cube S. Both
<a class="reference internal" href="process_module.html#process.InterferogramMerger.extract_stars_spectrum" title="process.InterferogramMerger.extract_stars_spectrum"><code class="xref py py-meth docutils literal"><span class="pre">extract_stars_spectrum()</span></code></a> and
<a class="reference internal" href="process_module.html#process.Spectrum.calibrate" title="process.Spectrum.calibrate"><code class="xref py py-meth docutils literal"><span class="pre">calibrate()</span></code></a> have been modified to take
that into account.</li>
<li>Bug fix in <a class="reference internal" href="process_module.html#process.InterferogramMerger.extract_stars_spectrum" title="process.InterferogramMerger.extract_stars_spectrum"><code class="xref py py-meth docutils literal"><span class="pre">extract_stars_spectrum()</span></code></a>.</li>
</ul>
</div>
<div class="section" id="astropy">
<h4>Astropy<a class="headerlink" href="#astropy" title="Permalink to this headline">¶</a></h4>
<p>Astropy (<a class="reference external" href="http://www.astropy.org/">http://www.astropy.org/</a>) is definitly needed, pyfits and
pywcs standalone modules are not needed anymore by ORBS (but they
still can be used by other modules ;) even modules imported by ORBS so
be carefull before removing them)</p>
<ul class="simple">
<li>PYFITS: now imported from astropy.io.fits</li>
<li>PYWCS: now imported from astropy.wcs</li>
</ul>
</div>
</div>
<div class="section" id="id18">
<h3>3.7.5<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id19">
<h4>Miscellaneous<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="process_module.html#process.RawData.correct_frame" title="process.RawData.correct_frame"><code class="xref py py-meth docutils literal"><span class="pre">correct_frame()</span></code></a>: Hot pixels correction
algorithm changed for a standard median correction (hot pixel value
is replaced by the median of the neighbouring pixels).</li>
<li><a class="reference internal" href="process_module.html#process.InterferogramMerger.merge" title="process.InterferogramMerger.merge"><code class="xref py py-meth docutils literal"><span class="pre">merge()</span></code></a>: Merging operation
when the frames of the camera B are not used do not rely anymore on
the computed stray light vector because of the impossibility to
determine correctly the base level of this vector.</li>
</ul>
</div>
</div>
</div>
<div class="section" id="v3-8-start-of-cfht-integration">
<h2>v3.8 Start of CFHT integration<a class="headerlink" href="#v3-8-start-of-cfht-integration" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id20">
<h3>3.8.0<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>script <strong>orbs</strong> can take a &#8216;SITELLE job file&#8217; as input. It creates an option file from it and launch orbs from this option file.</li>
<li>script <strong>orbs</strong> can be lauched in SITELLE or SPIOMM mode. This way
is ensures that the configuration file will be the good one (instead
of relying on the default behaviour)</li>
<li><a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs" title="orbs.orbs.Orbs"><code class="xref py py-class docutils literal"><span class="pre">orbs.orbs.Orbs</span></code></a> can be passed lists instead of directory paths for
object, dark, flat ...</li>
<li><a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs" title="orbs.orbs.Orbs"><code class="xref py py-class docutils literal"><span class="pre">orbs.orbs.Orbs</span></code></a> can be passed a special configuration file and
this choice is reflected on all the processes it launches.</li>
</ul>
</div>
<div class="section" id="id21">
<h3>3.8.1<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id22">
<h4><strong>orbs</strong> script<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<p><strong>orbs</strong> script has been modified a lot to integrate new operations:</p>
<ul class="simple">
<li><em>start</em>: start a reduction.</li>
<li><em>status</em>: display the status of all the reduction processes started
with the same option file.</li>
<li><em>resume</em>: simply resume the last reduction process started with the
given option file.</li>
<li><em>clean</em>: clean the folder from all the reduction files but the final
products.</li>
</ul>
<p>The new way of calling orbs is now:</p>
<div class="highlight-python"><div class="highlight"><pre>orbs [option_file_path] {start, status, resume, clean} [options]
</pre></div>
</div>
<p>To simply run the default reduction process (for an astrophysical object):</p>
<div class="highlight-python"><div class="highlight"><pre>orbs [option_file_path] start
</pre></div>
</div>
<p>If the data is e.g. a laser cube you must run orbs with the &#8211;laser option:</p>
<div class="highlight-python"><div class="highlight"><pre>orbs [option_file_path] start --laser
</pre></div>
</div>
<p>All the special targets are (the default target is a common
astrophysical object):</p>
<ul class="simple">
<li><em>laser</em>: for a laser cube</li>
<li><em>flat</em>: for a flat cube (or more generally a continnum source cube)</li>
<li><em>stars</em>: for a star/galaxy cluster</li>
<li><em>nostar</em>: for an astophysical object containing no star</li>
<li><em>standard</em>: for a standard star</li>
</ul>
<p>More options are available and can be listed by adding -h to the
command line.</p>
<p>Those operations are all based on the concept of RoadMaps (see below).</p>
</div>
<div class="section" id="roadmaps">
<h4>RoadMaps<a class="headerlink" href="#roadmaps" title="Permalink to this headline">¶</a></h4>
<p>The integration of the &#8216;roadmaps&#8217; concept avoid to modify the code in
order to add or modify a reduction sequence. It is now possible to
change the steps, their order and the associated options of a given
reduction sequence by modfying a simple xml file.</p>
<p>All the possible reduction steps are listed in the file <code class="file docutils literal"><span class="pre">orbs/data/roadmap.steps.xml</span></code></p>
<p>Each reduction process has its own roadmap. Each instrument has also
its own roadmaps and some reduction processes have different roadmaps
depending on the camera we want to reduce. A name of a roadmap file is thus:</p>
<div class="highlight-python"><div class="highlight"><pre>roadmap.[instrument].[target].[camera].xml
</pre></div>
</div>
<ul class="simple">
<li><em>instrument</em> can be <em>spiomm</em> or <em>sitelle</em></li>
<li><em>target</em> can be one of the special targets listed above or object for the default target</li>
<li><em>camera</em> can be <em>full</em> for a process using both cameras; <em>single1</em> or
<em>single2</em> for a process using only the camera 1 or 2.</li>
</ul>
<p>e.g. the roadmap file for the default reduction process of SITELLE is <code class="file docutils literal"><span class="pre">orbs/data/roadmap.sitelle.object.full.xml</span></code></p>
<ul class="simple">
<li>classes <a class="reference internal" href="orbs_module.html#orbs.orbs.RoadMap" title="orbs.orbs.RoadMap"><code class="xref py py-class docutils literal"><span class="pre">orbs.orbs.RoadMap</span></code></a> and
<a class="reference internal" href="orbs_module.html#orbs.orbs.Step" title="orbs.orbs.Step"><code class="xref py py-class docutils literal"><span class="pre">orbs.orbs.Step</span></code></a> created to manage the roadmap files.</li>
<li><a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs" title="orbs.orbs.Orbs"><code class="xref py py-class docutils literal"><span class="pre">orbs.orbs.Orbs</span></code></a> has been changed to integrate this new
concept. The methods <code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.full_reduction()</span></code> and
<code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.single_reduction()</span></code> have been replaced by one
simple method <a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs.start_reduction" title="orbs.orbs.Orbs.start_reduction"><code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.start_reduction()</span></code></a> which just
read the xml files and run the sequence.</li>
<li>most of the early &#8216;development&#8217; options of the methods of
<a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs" title="orbs.orbs.Orbs"><code class="xref py py-class docutils literal"><span class="pre">orbs.orbs.Orbs</span></code></a> have been removed, keeping only the
useful ones.</li>
</ul>
</div>
<div class="section" id="id23">
<h4>Miscellaneous<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><a class="reference internal" href="process_module.html#process.CalibrationLaser.create_calibration_laser_map" title="process.CalibrationLaser.create_calibration_laser_map"><code class="xref py py-meth docutils literal"><span class="pre">create_calibration_laser_map()</span></code></a>
output all the parameters of the fitted laser line. this way the ILS
(fwhm) map can be derived directly. The laser spectral cube is also
generated by default.</li>
<li>in <a class="reference internal" href="process_module.html#process.Interferogram.create_correction_vectors" title="process.Interferogram.create_correction_vectors"><code class="xref py py-meth docutils literal"><span class="pre">create_correction_vectors()</span></code></a>, the
correction of the transmission vector, in the case when only one
camera is reduced, has been enhanced (the transmission near ZPD
cannot be retrieved and must be guessed).</li>
</ul>
</div>
</div>
<div class="section" id="id24">
<h3>3.8.2<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<div class="section" id="aligner">
<h4>Aligner<a class="headerlink" href="#aligner" title="Permalink to this headline">¶</a></h4>
<p><code class="xref py py-class docutils literal"><span class="pre">orb.astrometry.Aligner</span></code> has been created in ORB to handle
alignement between frames. The whole alignment procedure has been
updated and is now much faster and robust. More details on the
alignment procedure can be found in ORB documentation.</p>
</div>
</div>
<div class="section" id="id25">
<h3>3.8.3<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<div class="section" id="spectral-calibration">
<h4>Spectral calibration<a class="headerlink" href="#spectral-calibration" title="Permalink to this headline">¶</a></h4>
<p>Spectral calibration is now done at the calibration step, see:
<a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs.calibrate_spectrum" title="orbs.orbs.Orbs.calibrate_spectrum"><code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.calibrate_spectrum()</span></code></a> (before this was done
during the FFT computation).</p>
</div>
</div>
<div class="section" id="id26">
<h3>3.8.4.0<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h3>
<div class="section" id="update-of-the-documentation">
<h4>Update of the documentation<a class="headerlink" href="#update-of-the-documentation" title="Permalink to this headline">¶</a></h4>
<p>A far more complete <strong>reduction guide</strong> (see <a class="reference internal" href="reduction_guide.html#reduction-guide"><span>ORBS Reduction Guide</span></a>)
has been written. Some parts still need some further explanations
(coming with 3.8.4.1).</p>
</div>
<div class="section" id="required-option-file-keywords">
<h4>Required option file keywords<a class="headerlink" href="#required-option-file-keywords" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The keywords <strong>BINCAM1</strong> and <strong>BINCAM2</strong> are not used anymore. The
binning is deduced from the detector size. CAM1_DETECTOR_SIZE_X,
CAM1_DETECTOR_SIZE_Y, CAM2_DETECTOR_SIZE_X, CAM2_DETECTOR_SIZE_Y
have been added to the ORB configuration file.</li>
<li><strong>SPEDART</strong> keyword is no more required if not path to a dark folder
is set (<strong>DIRDRK1</strong> or <strong>DIRDRK2</strong>).</li>
</ul>
</div>
</div>
</div>
<div class="section" id="v3-9-the-hdf5-miracle">
<h2>v3.9 The HDF5 Miracle<a class="headerlink" href="#v3-9-the-hdf5-miracle" title="Permalink to this headline">¶</a></h2>
<p>All ORBS internal cubes used for computation have been passed to an
HDF5 format which makes data loading incredibly faster. If those
changes have small effects on small data cubes like SpIOMM data, it
changes a lot the computation time on SITELLE&#8217;s data cubes (passing
from ~10 hours to 6.5 hours on a 16 procs machine).</p>
<p>The HDF5 format is also very useful to display large data cubes with
<strong>orb-viewer</strong> without loading the full cube in memory.</p>
<div class="section" id="v3-9-0">
<h3>v3.9.0<a class="headerlink" href="#v3-9-0" title="Permalink to this headline">¶</a></h3>
<p>Nearly all classes in <code class="file docutils literal"><span class="pre">orbs.py</span></code> (see <a class="reference internal" href="orbs_module.html#orbs-module"><span>Orbs module</span></a>) and
<code class="file docutils literal"><span class="pre">process.py</span></code> (see <a class="reference internal" href="process_module.html#process-module"><span>Process module</span></a>) have been modified to
accept hdf5 cubes as input and output hdf5 cubes.</p>
<p>During the Init of ORBS, FITS cubes are exported to HDF5 cubes before
the reduction can start.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">ORB documentation (v1.4.0) for more info on the numerous
core changes</p>
</div>
<div class="section" id="scripts">
<h4>Scripts<a class="headerlink" href="#scripts" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><strong>orbs-check</strong> has been modified to be based on GTK instead of
Tkinter (like all the other viewer of ORB). Tkinter is no more used
by ORBS.</li>
<li><strong>orbs-optcreator</strong> has not survived all the upgrades and has been
removed. A command line tool might come instead of a gui-based tool.</li>
</ul>
</div>
<div class="section" id="default-output-cube">
<h4>Default Output Cube<a class="headerlink" href="#default-output-cube" title="Permalink to this headline">¶</a></h4>
<p>The default output cube format is now the classic format (see
<a class="reference internal" href="reduction_guide.html#choosing-right-output"><span>Choosing the right output</span></a>) i.e. :</p>
<ul class="simple">
<li>Apodization 2.0</li>
<li>Wavelength</li>
<li>Calibrated</li>
</ul>
<p>This format <strong>is not the best format</strong> for data analysis but it is a
comprehensive format for eye checking. The best format would be:</p>
<ul class="simple">
<li>Apodization 1.0</li>
<li>Wavenumber</li>
<li>Uncalibrated</li>
</ul>
</div>
</div>
</div>
<div class="section" id="v3-10-handling-real-sitelle-s-data-cubes">
<h2>v3.10: handling real SITELLE&#8217;s data cubes<a class="headerlink" href="#v3-10-handling-real-sitelle-s-data-cubes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="v3-10-0">
<h3>v3.10.0<a class="headerlink" href="#v3-10-0" title="Permalink to this headline">¶</a></h3>
<div class="section" id="phase-correction">
<h4>Phase correction<a class="headerlink" href="#phase-correction" title="Permalink to this headline">¶</a></h4>
<p>SITELLE&#8217;s phase map is nearly ideal so that a <strong>better kind of phase
correction is possible</strong>. Now, the &#8216;order 0 phase map&#8217; depends only on
the OPD path i.e. the incident angle of the light (if we consider that
the surfaces ot the interferometer&#8217;s optics are perfect, which seems
to be a good enough assumption up to now). The order 0 phase map can
thus be modeled directly from the calibration laser map which gives
the incident angle at each pixels. As the calibration laser map can be
tilted (2 angles along X and Y axes) and rotated around its center,
the model must take into account all those 3 parameters.</p>
<p>There are at least two major <strong>advantages</strong>:</p>
<blockquote>
<div><ul class="simple">
<li>We have an <strong>understood model</strong> with physical parameters to fit
the phase map (and the fitting approximation is really great,
giving a gaussian shaped error distribution with no apparent bias
or skewness).</li>
<li><strong>We get the real calibration laser map</strong> which corresponds to the
scientific cube and not a calibration laser map taken in different
conditions (gravity vector, temperature and so on).</li>
</ul>
</div></blockquote>
<ul class="simple">
<li><a class="reference internal" href="process_module.html#process.Phase" title="process.Phase"><code class="xref py py-class docutils literal"><span class="pre">Phase</span></code></a>:<ul>
<li><a class="reference internal" href="process_module.html#process.Phase.fit_phase_map" title="process.Phase.fit_phase_map"><code class="xref py py-meth docutils literal"><span class="pre">fit_phase_map()</span></code></a> can be set to use a
&#8216;sitelle&#8217; model to fit the phase. In this case the new calibration
laser map is also
returned. <a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs.calibrate_spectrum" title="orbs.orbs.Orbs.calibrate_spectrum"><code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.calibrate_spectrum()</span></code></a> will use
the new calibration laser map.</li>
<li><a class="reference internal" href="process_module.html#process.Phase.smooth_phase_map" title="process.Phase.smooth_phase_map"><code class="xref py py-meth docutils literal"><span class="pre">smooth_phase_map()</span></code></a> is now parallelized to
smooth the phase map by quadrants (&#8216;unwrap&#8217; instead of &#8216;smooth&#8217;
would be more precise). A special algorithm has been developped to
reorder the quadrants (each one being individually smoothed) and
get a perfectly unwrapped phase map.</li>
</ul>
</li>
<li><a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs" title="orbs.orbs.Orbs"><code class="xref py py-class docutils literal"><span class="pre">orbs.orbs.Orbs</span></code></a> has been adapted to all those changes.</li>
<li><strong>n_phase</strong> argument (which gives the number of points used to
compute the phase) has been definitly removed. Now, the whole
interferogram is always considered because there is no interest in
using less points instead for a more aesthetic and smoother phase
vector (but the fitting precision is exactly the same).</li>
</ul>
</div>
<div class="section" id="id27">
<h4>Cosmic rays detection<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>A lot of high incident angle CR are visible and they are badly
detected by the actual process. The levels of detections have bee
lowered but the whole detection process must be recoded to get a
more robust detection (using both cameras for example).</li>
<li>All point sources are shielded (see ORB&#8217;s documentation for the
detection of all sources).</li>
</ul>
</div>
<div class="section" id="id28">
<h4>Miscellaneous<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><strong>orbs</strong> script accepts a new special target: &#8216;&#8211;raw&#8217; to get a
faster and robust reduction with no cosmic ray detection nor phase
correction (useful for fast verification of the general quality of a
data cube). Also, the old argument &#8211;nphase has been replaced
by &#8211;nophase to simply avoid phase correction.</li>
<li><a class="reference internal" href="orbs_module.html#orbs.orbs.Orbs.calibrate_spectrum" title="orbs.orbs.Orbs.calibrate_spectrum"><code class="xref py py-meth docutils literal"><span class="pre">orbs.orbs.Orbs.calibrate_spectrum()</span></code></a> now does not fail on
bad WCS calibration.</li>
<li>script <strong>orbs-sitelle-makejob</strong> created to help in creating a job
file from a list of the files to reduce (object files, flats and
calibration map)</li>
</ul>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="process_module.html" class="btn btn-neutral" title="Process module" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Thomas Martin (thomas.martin.1@ulaval.ca).
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'3.10.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>